{"ast":null,"code":"import React, { useState, useMemo } from 'react';\nimport { SortMinor } from '@shopify/polaris-icons';\nimport { FilterButton } from '../FilterButton/FilterButton.js';\nimport { ChoiceList } from '../../../ChoiceList/ChoiceList.js';\nimport { DirectionButton } from './components/DirectionButton/DirectionButton.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Tooltip } from '../../../Tooltip/Tooltip.js';\nimport { Icon } from '../../../Icon/Icon.js';\nimport { Popover } from '../../../Popover/Popover.js';\nimport { Box } from '../../../Box/Box.js';\nlet SortButtonDirection;\n(function (SortButtonDirection) {\n  SortButtonDirection[\"Asc\"] = \"asc\";\n  SortButtonDirection[\"Desc\"] = \"desc\";\n})(SortButtonDirection || (SortButtonDirection = {}));\nfunction SortButton(_ref) {\n  let {\n    choices,\n    selected,\n    onChange,\n    disabled,\n    onChangeKey,\n    onChangeDirection\n  } = _ref;\n  var _selectedChoices$, _selectedChoices$2, _selectedChoices$3, _selectedChoices$4;\n  const i18n = useI18n();\n  const [active, setActive] = useState(false);\n  const [selectedValueKey, selectedDirection] = selected[0].split(' ');\n  function handleClick() {\n    setActive(pastActive => !pastActive);\n  }\n  function handleClose() {\n    setActive(false);\n  }\n  function handleChangeChoiceList(sel) {\n    if (onChangeKey) {\n      const [key] = sel[0].split(' ');\n      onChangeKey(key);\n    } else {\n      onChange(sel);\n    }\n  }\n  function handleChangeDirection(sel) {\n    if (onChangeDirection) {\n      const [, direction] = sel[0].split(' ');\n      onChangeDirection(direction);\n    } else {\n      onChange(sel);\n    }\n  }\n  const choiceListChoices = useMemo(() => {\n    const choiceCategories = choices.reduce((acc, curr) => {\n      const alreadyExists = acc.some(option => option.label === curr.label);\n      const [, currentValueDirection] = curr.value.split(' ');\n      const isSameDirection = currentValueDirection === selectedDirection;\n      if (!alreadyExists) {\n        return [...acc, curr];\n      }\n      if (isSameDirection) {\n        return acc.map(option => {\n          if (option.label === curr.label) {\n            return curr;\n          }\n          return option;\n        });\n      }\n      return acc;\n    }, []);\n    return choiceCategories;\n  }, [choices, selectedDirection]);\n  const selectedChoices = choices.filter(choice => {\n    const [currentKey] = choice.value.split(' ');\n    return currentKey === selectedValueKey;\n  });\n  const sortButton = /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.translate('Polaris.IndexFilters.SortButton.tooltip'),\n    preferredPosition: \"above\",\n    hoverDelay: 400\n  }, /*#__PURE__*/React.createElement(FilterButton, {\n    onClick: handleClick,\n    \"aria-label\": i18n.translate('Polaris.IndexFilters.SortButton.ariaLabel'),\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(Icon, {\n    source: SortMinor,\n    color: \"base\"\n  })));\n  return /*#__PURE__*/React.createElement(Popover, {\n    active: active && !disabled,\n    activator: sortButton,\n    autofocusTarget: \"first-node\",\n    onClose: handleClose,\n    fluidContent: true\n  }, /*#__PURE__*/React.createElement(Box, {\n    minWidth: \"148px\",\n    padding: \"4\",\n    borderBlockEndWidth: \"1\",\n    borderColor: \"border-subdued\"\n  }, /*#__PURE__*/React.createElement(ChoiceList, {\n    title: i18n.translate('Polaris.IndexFilters.SortButton.title'),\n    choices: choiceListChoices,\n    selected: selected,\n    onChange: handleChangeChoiceList\n  })), /*#__PURE__*/React.createElement(Box, {\n    padding: \"4\"\n  }, /*#__PURE__*/React.createElement(DirectionButton, {\n    direction: \"asc\",\n    active: selectedDirection === SortButtonDirection.Asc,\n    onClick: handleChangeDirection,\n    value: selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$ = selectedChoices[0]) === null || _selectedChoices$ === void 0 ? void 0 : _selectedChoices$.value\n  }, selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$2 = selectedChoices[0]) === null || _selectedChoices$2 === void 0 ? void 0 : _selectedChoices$2.directionLabel), /*#__PURE__*/React.createElement(DirectionButton, {\n    direction: \"desc\",\n    active: selectedDirection === SortButtonDirection.Desc,\n    onClick: handleChangeDirection,\n    value: selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$3 = selectedChoices[1]) === null || _selectedChoices$3 === void 0 ? void 0 : _selectedChoices$3.value\n  }, selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$4 = selectedChoices[1]) === null || _selectedChoices$4 === void 0 ? void 0 : _selectedChoices$4.directionLabel)));\n}\nexport { SortButton, SortButtonDirection };","map":{"version":3,"names":["React","useState","useMemo","SortMinor","FilterButton","ChoiceList","DirectionButton","useI18n","Tooltip","Icon","Popover","Box","SortButtonDirection","SortButton","_ref","choices","selected","onChange","disabled","onChangeKey","onChangeDirection","_selectedChoices$","_selectedChoices$2","_selectedChoices$3","_selectedChoices$4","i18n","active","setActive","selectedValueKey","selectedDirection","split","handleClick","pastActive","handleClose","handleChangeChoiceList","sel","key","handleChangeDirection","direction","choiceListChoices","choiceCategories","reduce","acc","curr","alreadyExists","some","option","label","currentValueDirection","value","isSameDirection","map","selectedChoices","filter","choice","currentKey","sortButton","createElement","content","translate","preferredPosition","hoverDelay","onClick","source","color","activator","autofocusTarget","onClose","fluidContent","minWidth","padding","borderBlockEndWidth","borderColor","title","Asc","directionLabel","Desc"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/IndexFilters/components/SortButton/SortButton.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { SortMinor } from '@shopify/polaris-icons';\nimport { FilterButton } from '../FilterButton/FilterButton.js';\nimport { ChoiceList } from '../../../ChoiceList/ChoiceList.js';\nimport { DirectionButton } from './components/DirectionButton/DirectionButton.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Tooltip } from '../../../Tooltip/Tooltip.js';\nimport { Icon } from '../../../Icon/Icon.js';\nimport { Popover } from '../../../Popover/Popover.js';\nimport { Box } from '../../../Box/Box.js';\n\nlet SortButtonDirection;\n\n(function (SortButtonDirection) {\n  SortButtonDirection[\"Asc\"] = \"asc\";\n  SortButtonDirection[\"Desc\"] = \"desc\";\n})(SortButtonDirection || (SortButtonDirection = {}));\n\nfunction SortButton({\n  choices,\n  selected,\n  onChange,\n  disabled,\n  onChangeKey,\n  onChangeDirection\n}) {\n  var _selectedChoices$, _selectedChoices$2, _selectedChoices$3, _selectedChoices$4;\n\n  const i18n = useI18n();\n  const [active, setActive] = useState(false);\n  const [selectedValueKey, selectedDirection] = selected[0].split(' ');\n\n  function handleClick() {\n    setActive(pastActive => !pastActive);\n  }\n\n  function handleClose() {\n    setActive(false);\n  }\n\n  function handleChangeChoiceList(sel) {\n    if (onChangeKey) {\n      const [key] = sel[0].split(' ');\n      onChangeKey(key);\n    } else {\n      onChange(sel);\n    }\n  }\n\n  function handleChangeDirection(sel) {\n    if (onChangeDirection) {\n      const [, direction] = sel[0].split(' ');\n      onChangeDirection(direction);\n    } else {\n      onChange(sel);\n    }\n  }\n\n  const choiceListChoices = useMemo(() => {\n    const choiceCategories = choices.reduce((acc, curr) => {\n      const alreadyExists = acc.some(option => option.label === curr.label);\n      const [, currentValueDirection] = curr.value.split(' ');\n      const isSameDirection = currentValueDirection === selectedDirection;\n\n      if (!alreadyExists) {\n        return [...acc, curr];\n      }\n\n      if (isSameDirection) {\n        return acc.map(option => {\n          if (option.label === curr.label) {\n            return curr;\n          }\n\n          return option;\n        });\n      }\n\n      return acc;\n    }, []);\n    return choiceCategories;\n  }, [choices, selectedDirection]);\n  const selectedChoices = choices.filter(choice => {\n    const [currentKey] = choice.value.split(' ');\n    return currentKey === selectedValueKey;\n  });\n  const sortButton = /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.translate('Polaris.IndexFilters.SortButton.tooltip'),\n    preferredPosition: \"above\",\n    hoverDelay: 400\n  }, /*#__PURE__*/React.createElement(FilterButton, {\n    onClick: handleClick,\n    \"aria-label\": i18n.translate('Polaris.IndexFilters.SortButton.ariaLabel'),\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(Icon, {\n    source: SortMinor,\n    color: \"base\"\n  })));\n  return /*#__PURE__*/React.createElement(Popover, {\n    active: active && !disabled,\n    activator: sortButton,\n    autofocusTarget: \"first-node\",\n    onClose: handleClose,\n    fluidContent: true\n  }, /*#__PURE__*/React.createElement(Box, {\n    minWidth: \"148px\",\n    padding: \"4\",\n    borderBlockEndWidth: \"1\",\n    borderColor: \"border-subdued\"\n  }, /*#__PURE__*/React.createElement(ChoiceList, {\n    title: i18n.translate('Polaris.IndexFilters.SortButton.title'),\n    choices: choiceListChoices,\n    selected: selected,\n    onChange: handleChangeChoiceList\n  })), /*#__PURE__*/React.createElement(Box, {\n    padding: \"4\"\n  }, /*#__PURE__*/React.createElement(DirectionButton, {\n    direction: \"asc\",\n    active: selectedDirection === SortButtonDirection.Asc,\n    onClick: handleChangeDirection,\n    value: selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$ = selectedChoices[0]) === null || _selectedChoices$ === void 0 ? void 0 : _selectedChoices$.value\n  }, selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$2 = selectedChoices[0]) === null || _selectedChoices$2 === void 0 ? void 0 : _selectedChoices$2.directionLabel), /*#__PURE__*/React.createElement(DirectionButton, {\n    direction: \"desc\",\n    active: selectedDirection === SortButtonDirection.Desc,\n    onClick: handleChangeDirection,\n    value: selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$3 = selectedChoices[1]) === null || _selectedChoices$3 === void 0 ? void 0 : _selectedChoices$3.value\n  }, selectedChoices === null || selectedChoices === void 0 ? void 0 : (_selectedChoices$4 = selectedChoices[1]) === null || _selectedChoices$4 === void 0 ? void 0 : _selectedChoices$4.directionLabel)));\n}\n\nexport { SortButton, SortButtonDirection };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}