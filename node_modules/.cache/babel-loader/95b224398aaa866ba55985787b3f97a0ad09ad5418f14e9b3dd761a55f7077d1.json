{"ast":null,"code":"import { useState, useRef, useCallback, useEffect } from 'react';\nimport { debounce } from '../../../utilities/debounce.js';\nconst DEBOUNCE_PERIOD = 250;\nconst PADDING_IN_SELECT_MODE = 92;\nfunction useIsBulkActionsSticky(selectMode) {\n  const hasIOSupport = typeof window !== 'undefined' && Boolean(window.IntersectionObserver);\n  const [isBulkActionsSticky, setIsSticky] = useState(false);\n  const [bulkActionsAbsoluteOffset, setBulkActionsAbsoluteOffset] = useState(0);\n  const [bulkActionsMaxWidth, setBulkActionsMaxWidth] = useState(0);\n  const [bulkActionsOffsetLeft, setBulkActionsOffsetLeft] = useState(0);\n  const bulkActionsIntersectionRef = useRef(null);\n  const tableMeasurerRef = useRef(null);\n  const handleIntersect = entries => {\n    entries.forEach(entry => {\n      setIsSticky(!entry.isIntersecting);\n    });\n  };\n  const options = {\n    root: null,\n    rootMargin: '-12px',\n    threshold: 0\n  };\n  const observerRef = useRef(hasIOSupport ? new IntersectionObserver(handleIntersect, options) : null);\n  const computeTableDimensions = useCallback(() => {\n    const node = tableMeasurerRef.current;\n    if (!node) {\n      return {\n        maxWidth: 0,\n        offsetHeight: 0,\n        offsetLeft: 0\n      };\n    }\n    const box = node.getBoundingClientRect();\n    const paddingHeight = selectMode ? PADDING_IN_SELECT_MODE : 0;\n    const offsetHeight = box.height - paddingHeight;\n    const maxWidth = box.width;\n    const offsetLeft = box.left;\n    setBulkActionsAbsoluteOffset(offsetHeight);\n    setBulkActionsMaxWidth(maxWidth);\n    setBulkActionsOffsetLeft(offsetLeft);\n  }, [selectMode]);\n  useEffect(() => {\n    computeTableDimensions();\n    const debouncedComputeTableHeight = debounce(computeTableDimensions, DEBOUNCE_PERIOD, {\n      trailing: true\n    });\n    window.addEventListener('resize', debouncedComputeTableHeight);\n    return () => window.removeEventListener('resize', debouncedComputeTableHeight);\n  }, [computeTableDimensions]);\n  useEffect(() => {\n    const observer = observerRef.current;\n    if (!observer) {\n      return;\n    }\n    const node = bulkActionsIntersectionRef.current;\n    if (node) {\n      observer.observe(node);\n    }\n    return () => {\n      observer === null || observer === void 0 ? void 0 : observer.disconnect();\n    };\n  }, [bulkActionsIntersectionRef]);\n  return {\n    bulkActionsIntersectionRef,\n    tableMeasurerRef,\n    isBulkActionsSticky,\n    bulkActionsAbsoluteOffset,\n    bulkActionsMaxWidth,\n    bulkActionsOffsetLeft,\n    computeTableDimensions\n  };\n}\nexport { useIsBulkActionsSticky };","map":{"version":3,"names":["useState","useRef","useCallback","useEffect","debounce","DEBOUNCE_PERIOD","PADDING_IN_SELECT_MODE","useIsBulkActionsSticky","selectMode","hasIOSupport","window","Boolean","IntersectionObserver","isBulkActionsSticky","setIsSticky","bulkActionsAbsoluteOffset","setBulkActionsAbsoluteOffset","bulkActionsMaxWidth","setBulkActionsMaxWidth","bulkActionsOffsetLeft","setBulkActionsOffsetLeft","bulkActionsIntersectionRef","tableMeasurerRef","handleIntersect","entries","forEach","entry","isIntersecting","options","root","rootMargin","threshold","observerRef","computeTableDimensions","node","current","maxWidth","offsetHeight","offsetLeft","box","getBoundingClientRect","paddingHeight","height","width","left","debouncedComputeTableHeight","trailing","addEventListener","removeEventListener","observer","observe","disconnect"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/BulkActions/hooks/use-is-bulk-actions-sticky.js"],"sourcesContent":["import { useState, useRef, useCallback, useEffect } from 'react';\nimport { debounce } from '../../../utilities/debounce.js';\n\nconst DEBOUNCE_PERIOD = 250;\nconst PADDING_IN_SELECT_MODE = 92;\nfunction useIsBulkActionsSticky(selectMode) {\n  const hasIOSupport = typeof window !== 'undefined' && Boolean(window.IntersectionObserver);\n  const [isBulkActionsSticky, setIsSticky] = useState(false);\n  const [bulkActionsAbsoluteOffset, setBulkActionsAbsoluteOffset] = useState(0);\n  const [bulkActionsMaxWidth, setBulkActionsMaxWidth] = useState(0);\n  const [bulkActionsOffsetLeft, setBulkActionsOffsetLeft] = useState(0);\n  const bulkActionsIntersectionRef = useRef(null);\n  const tableMeasurerRef = useRef(null);\n\n  const handleIntersect = entries => {\n    entries.forEach(entry => {\n      setIsSticky(!entry.isIntersecting);\n    });\n  };\n\n  const options = {\n    root: null,\n    rootMargin: '-12px',\n    threshold: 0\n  };\n  const observerRef = useRef(hasIOSupport ? new IntersectionObserver(handleIntersect, options) : null);\n  const computeTableDimensions = useCallback(() => {\n    const node = tableMeasurerRef.current;\n\n    if (!node) {\n      return {\n        maxWidth: 0,\n        offsetHeight: 0,\n        offsetLeft: 0\n      };\n    }\n\n    const box = node.getBoundingClientRect();\n    const paddingHeight = selectMode ? PADDING_IN_SELECT_MODE : 0;\n    const offsetHeight = box.height - paddingHeight;\n    const maxWidth = box.width;\n    const offsetLeft = box.left;\n    setBulkActionsAbsoluteOffset(offsetHeight);\n    setBulkActionsMaxWidth(maxWidth);\n    setBulkActionsOffsetLeft(offsetLeft);\n  }, [selectMode]);\n  useEffect(() => {\n    computeTableDimensions();\n    const debouncedComputeTableHeight = debounce(computeTableDimensions, DEBOUNCE_PERIOD, {\n      trailing: true\n    });\n    window.addEventListener('resize', debouncedComputeTableHeight);\n    return () => window.removeEventListener('resize', debouncedComputeTableHeight);\n  }, [computeTableDimensions]);\n  useEffect(() => {\n    const observer = observerRef.current;\n\n    if (!observer) {\n      return;\n    }\n\n    const node = bulkActionsIntersectionRef.current;\n\n    if (node) {\n      observer.observe(node);\n    }\n\n    return () => {\n      observer === null || observer === void 0 ? void 0 : observer.disconnect();\n    };\n  }, [bulkActionsIntersectionRef]);\n  return {\n    bulkActionsIntersectionRef,\n    tableMeasurerRef,\n    isBulkActionsSticky,\n    bulkActionsAbsoluteOffset,\n    bulkActionsMaxWidth,\n    bulkActionsOffsetLeft,\n    computeTableDimensions\n  };\n}\n\nexport { useIsBulkActionsSticky };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}