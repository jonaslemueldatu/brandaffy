{"ast":null,"code":"import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { focusFirstFocusableNode } from '../../../../../../utilities/focus.js';\nimport { useI18n } from '../../../../../../utilities/i18n/hooks.js';\nimport { Modal } from '../../../../../Modal/Modal.js';\nimport { Form } from '../../../../../Form/Form.js';\nimport { FormLayout } from '../../../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../../../TextField/TextField.js';\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction DuplicateModal(_ref) {\n  let {\n    open,\n    isModalLoading,\n    name,\n    onClose,\n    onClickPrimaryAction,\n    onClickSecondaryAction,\n    helpText,\n    viewNames\n  } = _ref;\n  const i18n = useI18n();\n  const [value, setValue] = useState(name);\n  const container = useRef(null);\n  const hasSameNameError = viewNames === null || viewNames === void 0 ? void 0 : viewNames.some(viewName => viewName.trim().toLowerCase() === value.trim().toLowerCase());\n  const isPrimaryActionDisabled = isModalLoading || hasSameNameError || !value || value.length > MAX_VIEW_NAME_LENGTH;\n  useEffect(() => {\n    if (!container.current) return;\n    if (open) {\n      focusFirstFocusableNode(container.current);\n    }\n  }, [open]);\n  useEffect(() => {\n    if (open) {\n      setValue(name.slice(0, MAX_VIEW_NAME_LENGTH));\n    }\n  }, [name, open]);\n  const handleChange = useCallback(newValue => {\n    setValue(newValue);\n  }, []);\n  async function handlePrimaryAction() {\n    if (isPrimaryActionDisabled) {\n      return;\n    }\n    await onClickPrimaryAction(value);\n    setValue('');\n    onClose();\n  }\n  function handleSecondaryAction() {\n    onClickSecondaryAction === null || onClickSecondaryAction === void 0 ? void 0 : onClickSecondaryAction();\n    setValue(name);\n    onClose();\n  }\n  return /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: onClose,\n    title: i18n.translate('Polaris.Tabs.DuplicateModal.title'),\n    primaryAction: {\n      content: i18n.translate('Polaris.Tabs.DuplicateModal.create'),\n      onAction: handlePrimaryAction,\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      content: i18n.translate('Polaris.Tabs.DuplicateModal.cancel'),\n      onAction: handleSecondaryAction\n    }],\n    instant: true\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.Tabs.DuplicateModal.label'),\n    value: value,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    helpText: helpText,\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.Tabs.DuplicateModal.errors.sameName', {\n      name: value\n    }) : undefined\n  }))))));\n}\nexport { DuplicateModal };","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","focusFirstFocusableNode","useI18n","Modal","Form","FormLayout","TextField","MAX_VIEW_NAME_LENGTH","DuplicateModal","_ref","open","isModalLoading","name","onClose","onClickPrimaryAction","onClickSecondaryAction","helpText","viewNames","i18n","value","setValue","container","hasSameNameError","some","viewName","trim","toLowerCase","isPrimaryActionDisabled","length","current","slice","handleChange","newValue","handlePrimaryAction","handleSecondaryAction","createElement","title","translate","primaryAction","content","onAction","disabled","secondaryActions","instant","Section","onSubmit","ref","label","onChange","autoComplete","maxLength","showCharacterCount","error","undefined"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/AlphaTabs/components/Tab/components/DuplicateModal/DuplicateModal.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { focusFirstFocusableNode } from '../../../../../../utilities/focus.js';\nimport { useI18n } from '../../../../../../utilities/i18n/hooks.js';\nimport { Modal } from '../../../../../Modal/Modal.js';\nimport { Form } from '../../../../../Form/Form.js';\nimport { FormLayout } from '../../../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../../../TextField/TextField.js';\n\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction DuplicateModal({\n  open,\n  isModalLoading,\n  name,\n  onClose,\n  onClickPrimaryAction,\n  onClickSecondaryAction,\n  helpText,\n  viewNames\n}) {\n  const i18n = useI18n();\n  const [value, setValue] = useState(name);\n  const container = useRef(null);\n  const hasSameNameError = viewNames === null || viewNames === void 0 ? void 0 : viewNames.some(viewName => viewName.trim().toLowerCase() === value.trim().toLowerCase());\n  const isPrimaryActionDisabled = isModalLoading || hasSameNameError || !value || value.length > MAX_VIEW_NAME_LENGTH;\n  useEffect(() => {\n    if (!container.current) return;\n\n    if (open) {\n      focusFirstFocusableNode(container.current);\n    }\n  }, [open]);\n  useEffect(() => {\n    if (open) {\n      setValue(name.slice(0, MAX_VIEW_NAME_LENGTH));\n    }\n  }, [name, open]);\n  const handleChange = useCallback(newValue => {\n    setValue(newValue);\n  }, []);\n\n  async function handlePrimaryAction() {\n    if (isPrimaryActionDisabled) {\n      return;\n    }\n\n    await onClickPrimaryAction(value);\n    setValue('');\n    onClose();\n  }\n\n  function handleSecondaryAction() {\n    onClickSecondaryAction === null || onClickSecondaryAction === void 0 ? void 0 : onClickSecondaryAction();\n    setValue(name);\n    onClose();\n  }\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: onClose,\n    title: i18n.translate('Polaris.Tabs.DuplicateModal.title'),\n    primaryAction: {\n      content: i18n.translate('Polaris.Tabs.DuplicateModal.create'),\n      onAction: handlePrimaryAction,\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      content: i18n.translate('Polaris.Tabs.DuplicateModal.cancel'),\n      onAction: handleSecondaryAction\n    }],\n    instant: true\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.Tabs.DuplicateModal.label'),\n    value: value,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    helpText: helpText,\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.Tabs.DuplicateModal.errors.sameName', {\n      name: value\n    }) : undefined\n  }))))));\n}\n\nexport { DuplicateModal };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}