{"ast":null,"code":"import { useState, useRef, useEffect } from 'react';\nimport { debounce } from '../../../../utilities/debounce.js';\nconst DEBOUNCE_PERIOD = 250;\nfunction useIsSticky(mode, disabled, isFlushWhenSticky) {\n  const hasIOSupport = typeof window !== 'undefined' && Boolean(window.IntersectionObserver);\n  const options = {\n    root: null,\n    rootMargin: `${isFlushWhenSticky ? '0px' : '-56px'} 0px 0px 0px`,\n    threshold: 0\n  };\n  const [indexFilteringHeight, setIndexFiltersHeight] = useState(0);\n  const [isSticky, setIsSticky] = useState(false);\n  const measurerRef = useRef(null);\n  const intersectionRef = useRef(null);\n  const handleIntersect = entries => {\n    entries.forEach(entry => {\n      setIsSticky(!entry.isIntersecting);\n    });\n  };\n  const observerRef = useRef(hasIOSupport ? new IntersectionObserver(handleIntersect, options) : null);\n  useEffect(() => {\n    function computeDimensions() {\n      const node = measurerRef.current;\n      if (!node) {\n        return {\n          height: 0\n        };\n      }\n      const box = node.getBoundingClientRect();\n      const height = box.height;\n      setIndexFiltersHeight(height);\n    }\n    computeDimensions();\n    const debouncedComputeDimensions = debounce(computeDimensions, DEBOUNCE_PERIOD, {\n      trailing: true\n    });\n    window.addEventListener('resize', debouncedComputeDimensions);\n    return () => window.removeEventListener('resize', debouncedComputeDimensions);\n  }, [measurerRef, mode]);\n  useEffect(() => {\n    const observer = observerRef.current;\n    if (!observer) {\n      return;\n    }\n    const node = intersectionRef.current;\n    if (node) {\n      observer.observe(node);\n    }\n    return () => {\n      observer === null || observer === void 0 ? void 0 : observer.disconnect();\n    };\n  }, [intersectionRef]);\n  return {\n    intersectionRef: intersectionRef,\n    measurerRef,\n    isSticky: isSticky && !disabled,\n    indexFilteringHeight\n  };\n}\nexport { useIsSticky };","map":{"version":3,"names":["useState","useRef","useEffect","debounce","DEBOUNCE_PERIOD","useIsSticky","mode","disabled","isFlushWhenSticky","hasIOSupport","window","Boolean","IntersectionObserver","options","root","rootMargin","threshold","indexFilteringHeight","setIndexFiltersHeight","isSticky","setIsSticky","measurerRef","intersectionRef","handleIntersect","entries","forEach","entry","isIntersecting","observerRef","computeDimensions","node","current","height","box","getBoundingClientRect","debouncedComputeDimensions","trailing","addEventListener","removeEventListener","observer","observe","disconnect"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/IndexFilters/hooks/useIsSticky/useIsSticky.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { debounce } from '../../../../utilities/debounce.js';\n\nconst DEBOUNCE_PERIOD = 250;\nfunction useIsSticky(mode, disabled, isFlushWhenSticky) {\n  const hasIOSupport = typeof window !== 'undefined' && Boolean(window.IntersectionObserver);\n  const options = {\n    root: null,\n    rootMargin: `${isFlushWhenSticky ? '0px' : '-56px'} 0px 0px 0px`,\n    threshold: 0\n  };\n  const [indexFilteringHeight, setIndexFiltersHeight] = useState(0);\n  const [isSticky, setIsSticky] = useState(false);\n  const measurerRef = useRef(null);\n  const intersectionRef = useRef(null);\n\n  const handleIntersect = entries => {\n    entries.forEach(entry => {\n      setIsSticky(!entry.isIntersecting);\n    });\n  };\n\n  const observerRef = useRef(hasIOSupport ? new IntersectionObserver(handleIntersect, options) : null);\n  useEffect(() => {\n    function computeDimensions() {\n      const node = measurerRef.current;\n\n      if (!node) {\n        return {\n          height: 0\n        };\n      }\n\n      const box = node.getBoundingClientRect();\n      const height = box.height;\n      setIndexFiltersHeight(height);\n    }\n\n    computeDimensions();\n    const debouncedComputeDimensions = debounce(computeDimensions, DEBOUNCE_PERIOD, {\n      trailing: true\n    });\n    window.addEventListener('resize', debouncedComputeDimensions);\n    return () => window.removeEventListener('resize', debouncedComputeDimensions);\n  }, [measurerRef, mode]);\n  useEffect(() => {\n    const observer = observerRef.current;\n\n    if (!observer) {\n      return;\n    }\n\n    const node = intersectionRef.current;\n\n    if (node) {\n      observer.observe(node);\n    }\n\n    return () => {\n      observer === null || observer === void 0 ? void 0 : observer.disconnect();\n    };\n  }, [intersectionRef]);\n  return {\n    intersectionRef: intersectionRef,\n    measurerRef,\n    isSticky: isSticky && !disabled,\n    indexFilteringHeight\n  };\n}\n\nexport { useIsSticky };\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AACnD,SAASC,QAAQ,QAAQ,mCAAmC;AAE5D,MAAMC,eAAe,GAAG,GAAG;AAC3B,SAASC,WAAWA,CAACC,IAAI,EAAEC,QAAQ,EAAEC,iBAAiB,EAAE;EACtD,MAAMC,YAAY,GAAG,OAAOC,MAAM,KAAK,WAAW,IAAIC,OAAO,CAACD,MAAM,CAACE,oBAAoB,CAAC;EAC1F,MAAMC,OAAO,GAAG;IACdC,IAAI,EAAE,IAAI;IACVC,UAAU,EAAG,GAAEP,iBAAiB,GAAG,KAAK,GAAG,OAAQ,cAAa;IAChEQ,SAAS,EAAE;EACb,CAAC;EACD,MAAM,CAACC,oBAAoB,EAAEC,qBAAqB,CAAC,GAAGlB,QAAQ,CAAC,CAAC,CAAC;EACjE,MAAM,CAACmB,QAAQ,EAAEC,WAAW,CAAC,GAAGpB,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMqB,WAAW,GAAGpB,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMqB,eAAe,GAAGrB,MAAM,CAAC,IAAI,CAAC;EAEpC,MAAMsB,eAAe,GAAGC,OAAO,IAAI;IACjCA,OAAO,CAACC,OAAO,CAACC,KAAK,IAAI;MACvBN,WAAW,CAAC,CAACM,KAAK,CAACC,cAAc,CAAC;IACpC,CAAC,CAAC;EACJ,CAAC;EAED,MAAMC,WAAW,GAAG3B,MAAM,CAACQ,YAAY,GAAG,IAAIG,oBAAoB,CAACW,eAAe,EAAEV,OAAO,CAAC,GAAG,IAAI,CAAC;EACpGX,SAAS,CAAC,MAAM;IACd,SAAS2B,iBAAiBA,CAAA,EAAG;MAC3B,MAAMC,IAAI,GAAGT,WAAW,CAACU,OAAO;MAEhC,IAAI,CAACD,IAAI,EAAE;QACT,OAAO;UACLE,MAAM,EAAE;QACV,CAAC;MACH;MAEA,MAAMC,GAAG,GAAGH,IAAI,CAACI,qBAAqB,CAAC,CAAC;MACxC,MAAMF,MAAM,GAAGC,GAAG,CAACD,MAAM;MACzBd,qBAAqB,CAACc,MAAM,CAAC;IAC/B;IAEAH,iBAAiB,CAAC,CAAC;IACnB,MAAMM,0BAA0B,GAAGhC,QAAQ,CAAC0B,iBAAiB,EAAEzB,eAAe,EAAE;MAC9EgC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACF1B,MAAM,CAAC2B,gBAAgB,CAAC,QAAQ,EAAEF,0BAA0B,CAAC;IAC7D,OAAO,MAAMzB,MAAM,CAAC4B,mBAAmB,CAAC,QAAQ,EAAEH,0BAA0B,CAAC;EAC/E,CAAC,EAAE,CAACd,WAAW,EAAEf,IAAI,CAAC,CAAC;EACvBJ,SAAS,CAAC,MAAM;IACd,MAAMqC,QAAQ,GAAGX,WAAW,CAACG,OAAO;IAEpC,IAAI,CAACQ,QAAQ,EAAE;MACb;IACF;IAEA,MAAMT,IAAI,GAAGR,eAAe,CAACS,OAAO;IAEpC,IAAID,IAAI,EAAE;MACRS,QAAQ,CAACC,OAAO,CAACV,IAAI,CAAC;IACxB;IAEA,OAAO,MAAM;MACXS,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACE,UAAU,CAAC,CAAC;IAC3E,CAAC;EACH,CAAC,EAAE,CAACnB,eAAe,CAAC,CAAC;EACrB,OAAO;IACLA,eAAe,EAAEA,eAAe;IAChCD,WAAW;IACXF,QAAQ,EAAEA,QAAQ,IAAI,CAACZ,QAAQ;IAC/BU;EACF,CAAC;AACH;AAEA,SAASZ,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}