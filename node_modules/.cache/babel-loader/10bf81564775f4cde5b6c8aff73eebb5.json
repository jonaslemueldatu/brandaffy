{"ast":null,"code":"import _slicedToArray from \"/Users/jonaslemueldatu/Desktop/Brandaffy.io/brandaffy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jonaslemueldatu/Desktop/Brandaffy.io/brandaffy/src/snippets/SocialloginIG.js\";\nimport React, { useEffect, useState } from \"react\";\nimport '../styles/snippets/SocialloginIG.css';\nimport { LoginSocialInstagram } from 'reactjs-social-login';\nimport { InstagramLoginButton } from 'react-social-login-buttons';\nimport axios from \"axios\";\nfunction SocialloginIG() {\n  var REDIRECT_URI = 'https://localhost:3001/dashboard/affiliate/profile';\n  var _useState = useState({}),\n    _useState2 = _slicedToArray(_useState, 2),\n    profile = _useState2[0],\n    setProfile = _useState2[1];\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    longtoken = _useState4[0],\n    setLongtoken = _useState4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    username = _useState6[0],\n    setUsername = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    mediaCount = _useState8[0],\n    setMediaCount = _useState8[1];\n  useEffect(function () {\n    if (profile.access_token) {\n      axios.get(\"https://graph.instagram.com/access_token?grant_type=ig_exchange_token&client_secret=\".concat(process.env.REACT_APP_INSTAGRAM_CLIENT_SECRET, \"&access_token=\").concat(profile.access_token), {}).then(function (res) {\n        console.log(res);\n        setLongtoken(res.data);\n      });\n    }\n  }, [profile]);\n  useEffect(function () {\n    if (longtoken.access_token) {\n      axios.get(\"https://graph.instagram.com/v17.0/\".concat(profile.user_id, \"?fields=username,media_count&access_token=\").concat(longtoken.access_token), {}).then(function (res) {\n        setUsername(res.data.username);\n        setMediaCount(res.data.media_count);\n      });\n    }\n  }, [longtoken, profile.user_id]);\n  useEffect(function () {\n    // if (username != \"\") {\n    //     axios.get(`https://www.instagram.com/${username}`, {}).then((res) => {\n    //         console.log(res)\n    //     })\n    // }\n  }, [username]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"socialloginig-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LoginSocialInstagram, {\n    isOnlyGetToken: true,\n    client_id: process.env.REACT_APP_INSTAGRAM_CLIENT_ID || '',\n    client_secret: process.env.REACT_APP_INSTAGRAM_CLIENT_SECRET || '',\n    redirect_uri: REDIRECT_URI,\n    onResolve: function onResolve(_ref) {\n      var data = _ref.data;\n      setProfile(data);\n      console.log(data);\n    },\n    onReject: function onReject(err) {\n      console.log(err);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(InstagramLoginButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  })));\n}\nexport default SocialloginIG;","map":{"version":3,"names":["React","useEffect","useState","LoginSocialInstagram","InstagramLoginButton","axios","SocialloginIG","REDIRECT_URI","_useState","_useState2","_slicedToArray","profile","setProfile","_useState3","_useState4","longtoken","setLongtoken","_useState5","_useState6","username","setUsername","_useState7","_useState8","mediaCount","setMediaCount","access_token","get","concat","process","env","REACT_APP_INSTAGRAM_CLIENT_SECRET","then","res","console","log","data","user_id","media_count","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","isOnlyGetToken","client_id","REACT_APP_INSTAGRAM_CLIENT_ID","client_secret","redirect_uri","onResolve","_ref","onReject","err"],"sources":["/Users/jonaslemueldatu/Desktop/Brandaffy.io/brandaffy/src/snippets/SocialloginIG.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport '../styles/snippets/SocialloginIG.css'\nimport { LoginSocialInstagram } from 'reactjs-social-login';\nimport { InstagramLoginButton } from 'react-social-login-buttons';\nimport axios from \"axios\";\n\n\nfunction SocialloginIG() {\n\n    const REDIRECT_URI = 'https://localhost:3001/dashboard/affiliate/profile'\n    const [profile, setProfile] = useState({});\n    const [longtoken, setLongtoken] = useState({})\n    const [username, setUsername] = useState(\"\")\n    const [mediaCount, setMediaCount] = useState(0)\n\n    useEffect(() => {\n        if (profile.access_token) {\n            axios.get(`https://graph.instagram.com/access_token?grant_type=ig_exchange_token&client_secret=${process.env.REACT_APP_INSTAGRAM_CLIENT_SECRET}&access_token=${profile.access_token}`, {}).then((res) => {\n                console.log(res)\n                setLongtoken(res.data)\n            })\n        }\n    }, [profile])\n\n    useEffect(() => {\n        if (longtoken.access_token) {\n            axios.get(`https://graph.instagram.com/v17.0/${profile.user_id}?fields=username,media_count&access_token=${longtoken.access_token}`, {}).then((res) => {\n                setUsername(res.data.username)\n                setMediaCount(res.data.media_count)\n            })\n        }\n    }, [longtoken, profile.user_id])\n\n    useEffect(() => {\n        // if (username != \"\") {\n        //     axios.get(`https://www.instagram.com/${username}`, {}).then((res) => {\n        //         console.log(res)\n        //     })\n        // }\n    }, [username])\n\n\n    return (\n        <div className=\"socialloginig-container\">\n            <LoginSocialInstagram\n                isOnlyGetToken\n                client_id={process.env.REACT_APP_INSTAGRAM_CLIENT_ID || ''}\n                client_secret={process.env.REACT_APP_INSTAGRAM_CLIENT_SECRET || ''}\n                redirect_uri={REDIRECT_URI}\n                onResolve={({ data }) => {\n                    setProfile(data)\n                    console.log(data)\n                }}\n                onReject={(err) => {\n                    console.log(err)\n                }}\n            >\n                <InstagramLoginButton />\n            </LoginSocialInstagram>\n        </div>\n    )\n}\n\nexport default SocialloginIG"],"mappings":"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"},"metadata":{},"sourceType":"module"}