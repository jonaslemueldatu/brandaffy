{"ast":null,"code":"import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { useIsTouchDevice } from '../../../../utilities/use-is-touch-device.js';\nimport { focusFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Modal } from '../../../Modal/Modal.js';\nimport { Form } from '../../../Form/Form.js';\nimport { FormLayout } from '../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../TextField/TextField.js';\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction CreateViewModal(_ref) {\n  let {\n    activator,\n    open,\n    onClose,\n    onClickPrimaryAction,\n    onClickSecondaryAction,\n    viewNames\n  } = _ref;\n  const i18n = useI18n();\n  const [value, setValue] = useState('');\n  const [loading, setLoading] = useState(false);\n  const container = useRef(null);\n  const isTouchDevice = useIsTouchDevice();\n  const hasSameNameError = viewNames.some(viewName => viewName.trim().toLowerCase() === value.trim().toLowerCase());\n  const isPrimaryActionDisabled = !value || hasSameNameError || loading || value.length > MAX_VIEW_NAME_LENGTH;\n  useEffect(() => {\n    if (!container.current || isTouchDevice) return;\n    if (open) {\n      focusFirstFocusableNode(container.current);\n      const timeout = setTimeout(() => {\n        if (!container.current) return;\n        focusFirstFocusableNode(container.current);\n      }, 50);\n      return () => clearTimeout(timeout);\n    }\n  }, [open, isTouchDevice]);\n  const handleChange = useCallback(newValue => {\n    setValue(newValue);\n  }, []);\n  async function handlePrimaryAction() {\n    if (hasSameNameError || isPrimaryActionDisabled) {\n      return;\n    }\n    setLoading(true);\n    await onClickPrimaryAction(value);\n    setLoading(false);\n    setValue('');\n    onClose();\n  }\n  function handleSecondaryAction() {\n    onClickSecondaryAction === null || onClickSecondaryAction === void 0 ? void 0 : onClickSecondaryAction();\n    setValue('');\n    onClose();\n  }\n  return /*#__PURE__*/React.createElement(Modal, {\n    activator: activator,\n    open: open,\n    onClose: onClose,\n    title: i18n.translate('Polaris.Tabs.CreateViewModal.title'),\n    primaryAction: {\n      content: i18n.translate('Polaris.Tabs.CreateViewModal.create'),\n      onAction: handlePrimaryAction,\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      content: i18n.translate('Polaris.Tabs.CreateViewModal.cancel'),\n      onAction: handleSecondaryAction\n    }]\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.Tabs.CreateViewModal.label'),\n    value: value,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.Tabs.CreateViewModal.errors.sameName', {\n      name: value\n    }) : undefined\n  }))))));\n}\nexport { CreateViewModal };","map":{"version":3,"names":["React","useState","useRef","useEffect","useCallback","useIsTouchDevice","focusFirstFocusableNode","useI18n","Modal","Form","FormLayout","TextField","MAX_VIEW_NAME_LENGTH","CreateViewModal","_ref","activator","open","onClose","onClickPrimaryAction","onClickSecondaryAction","viewNames","i18n","value","setValue","loading","setLoading","container","isTouchDevice","hasSameNameError","some","viewName","trim","toLowerCase","isPrimaryActionDisabled","length","current","timeout","setTimeout","clearTimeout","handleChange","newValue","handlePrimaryAction","handleSecondaryAction","createElement","title","translate","primaryAction","content","onAction","disabled","secondaryActions","Section","onSubmit","ref","label","onChange","autoComplete","maxLength","showCharacterCount","error","name","undefined"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/AlphaTabs/components/CreateViewModal/CreateViewModal.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { useIsTouchDevice } from '../../../../utilities/use-is-touch-device.js';\nimport { focusFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Modal } from '../../../Modal/Modal.js';\nimport { Form } from '../../../Form/Form.js';\nimport { FormLayout } from '../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../TextField/TextField.js';\n\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction CreateViewModal({\n  activator,\n  open,\n  onClose,\n  onClickPrimaryAction,\n  onClickSecondaryAction,\n  viewNames\n}) {\n  const i18n = useI18n();\n  const [value, setValue] = useState('');\n  const [loading, setLoading] = useState(false);\n  const container = useRef(null);\n  const isTouchDevice = useIsTouchDevice();\n  const hasSameNameError = viewNames.some(viewName => viewName.trim().toLowerCase() === value.trim().toLowerCase());\n  const isPrimaryActionDisabled = !value || hasSameNameError || loading || value.length > MAX_VIEW_NAME_LENGTH;\n  useEffect(() => {\n    if (!container.current || isTouchDevice) return;\n\n    if (open) {\n      focusFirstFocusableNode(container.current);\n      const timeout = setTimeout(() => {\n        if (!container.current) return;\n        focusFirstFocusableNode(container.current);\n      }, 50);\n      return () => clearTimeout(timeout);\n    }\n  }, [open, isTouchDevice]);\n  const handleChange = useCallback(newValue => {\n    setValue(newValue);\n  }, []);\n\n  async function handlePrimaryAction() {\n    if (hasSameNameError || isPrimaryActionDisabled) {\n      return;\n    }\n\n    setLoading(true);\n    await onClickPrimaryAction(value);\n    setLoading(false);\n    setValue('');\n    onClose();\n  }\n\n  function handleSecondaryAction() {\n    onClickSecondaryAction === null || onClickSecondaryAction === void 0 ? void 0 : onClickSecondaryAction();\n    setValue('');\n    onClose();\n  }\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    activator: activator,\n    open: open,\n    onClose: onClose,\n    title: i18n.translate('Polaris.Tabs.CreateViewModal.title'),\n    primaryAction: {\n      content: i18n.translate('Polaris.Tabs.CreateViewModal.create'),\n      onAction: handlePrimaryAction,\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      content: i18n.translate('Polaris.Tabs.CreateViewModal.cancel'),\n      onAction: handleSecondaryAction\n    }]\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.Tabs.CreateViewModal.label'),\n    value: value,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.Tabs.CreateViewModal.errors.sameName', {\n      name: value\n    }) : undefined\n  }))))));\n}\n\nexport { CreateViewModal };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}