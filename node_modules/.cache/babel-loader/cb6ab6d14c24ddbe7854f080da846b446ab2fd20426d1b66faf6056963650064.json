{"ast":null,"code":"import React, { useState, Children, useRef, useCallback, useMemo } from 'react';\nimport styles from './Combobox.scss.js';\nimport { ComboboxTextFieldContext, ComboboxListboxContext, ComboboxListboxOptionContext } from '../../utilities/combobox/context.js';\nimport { TextField } from './components/TextField/TextField.js';\nimport { Popover } from '../Popover/Popover.js';\nfunction Combobox(_ref) {\n  let {\n    activator,\n    allowMultiple,\n    children,\n    preferredPosition = 'below',\n    willLoadMoreOptions,\n    height,\n    onScrolledToBottom,\n    onClose\n  } = _ref;\n  const [popoverActive, setPopoverActive] = useState(false);\n  const [activeOptionId, setActiveOptionId] = useState();\n  const [textFieldLabelId, setTextFieldLabelId] = useState();\n  const [listboxId, setListboxId] = useState();\n  const [textFieldFocused, setTextFieldFocused] = useState(false);\n  const shouldOpen = Boolean(!popoverActive && Children.count(children) > 0);\n  const ref = useRef(null);\n  const handleClose = useCallback(() => {\n    setPopoverActive(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActiveOptionId(undefined);\n  }, [onClose]);\n  const handleOpen = useCallback(() => {\n    setPopoverActive(true);\n    setActiveOptionId(undefined);\n  }, []);\n  const onOptionSelected = useCallback(() => {\n    var _ref$current;\n    if (!allowMultiple) {\n      handleClose();\n      setActiveOptionId(undefined);\n      return;\n    }\n    (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.forceUpdatePosition();\n  }, [allowMultiple, handleClose]);\n  const handleFocus = useCallback(() => {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  const handleChange = useCallback(() => {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  const handleBlur = useCallback(() => {\n    if (popoverActive) {\n      handleClose();\n    }\n  }, [popoverActive, handleClose]);\n  const textFieldContextValue = useMemo(() => ({\n    activeOptionId,\n    expanded: popoverActive,\n    listboxId,\n    setTextFieldFocused,\n    setTextFieldLabelId,\n    onTextFieldFocus: handleFocus,\n    onTextFieldChange: handleChange,\n    onTextFieldBlur: handleBlur\n  }), [activeOptionId, popoverActive, listboxId, setTextFieldFocused, setTextFieldLabelId, handleFocus, handleChange, handleBlur]);\n  const listboxOptionContextValue = useMemo(() => ({\n    allowMultiple\n  }), [allowMultiple]);\n  const listboxContextValue = useMemo(() => ({\n    listboxId,\n    textFieldLabelId,\n    textFieldFocused,\n    willLoadMoreOptions,\n    onOptionSelected,\n    setActiveOptionId,\n    setListboxId,\n    onKeyToBottom: onScrolledToBottom\n  }), [listboxId, textFieldLabelId, textFieldFocused, willLoadMoreOptions, onOptionSelected, setActiveOptionId, setListboxId, onScrolledToBottom]);\n  return /*#__PURE__*/React.createElement(Popover, {\n    ref: ref,\n    active: popoverActive,\n    activator: /*#__PURE__*/React.createElement(ComboboxTextFieldContext.Provider, {\n      value: textFieldContextValue\n    }, activator),\n    autofocusTarget: \"none\",\n    preventFocusOnClose: true,\n    fullWidth: true,\n    preferInputActivator: false,\n    preferredPosition: preferredPosition,\n    onClose: handleClose\n  }, Children.count(children) > 0 ? /*#__PURE__*/React.createElement(Popover.Pane, {\n    onScrolledToBottom: onScrolledToBottom,\n    height: height\n  }, /*#__PURE__*/React.createElement(ComboboxListboxContext.Provider, {\n    value: listboxContextValue\n  }, /*#__PURE__*/React.createElement(ComboboxListboxOptionContext.Provider, {\n    value: listboxOptionContextValue\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Listbox\n  }, children)))) : null);\n}\nCombobox.TextField = TextField;\nexport { Combobox };","map":{"version":3,"names":["React","useState","Children","useRef","useCallback","useMemo","styles","ComboboxTextFieldContext","ComboboxListboxContext","ComboboxListboxOptionContext","TextField","Popover","Combobox","_ref","activator","allowMultiple","children","preferredPosition","willLoadMoreOptions","height","onScrolledToBottom","onClose","popoverActive","setPopoverActive","activeOptionId","setActiveOptionId","textFieldLabelId","setTextFieldLabelId","listboxId","setListboxId","textFieldFocused","setTextFieldFocused","shouldOpen","Boolean","count","ref","handleClose","undefined","handleOpen","onOptionSelected","_ref$current","current","forceUpdatePosition","handleFocus","handleChange","handleBlur","textFieldContextValue","expanded","onTextFieldFocus","onTextFieldChange","onTextFieldBlur","listboxOptionContextValue","listboxContextValue","onKeyToBottom","createElement","active","Provider","value","autofocusTarget","preventFocusOnClose","fullWidth","preferInputActivator","Pane","className","Listbox"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/Combobox/Combobox.js"],"sourcesContent":["import React, { useState, Children, useRef, useCallback, useMemo } from 'react';\nimport styles from './Combobox.scss.js';\nimport { ComboboxTextFieldContext, ComboboxListboxContext, ComboboxListboxOptionContext } from '../../utilities/combobox/context.js';\nimport { TextField } from './components/TextField/TextField.js';\nimport { Popover } from '../Popover/Popover.js';\n\nfunction Combobox({\n  activator,\n  allowMultiple,\n  children,\n  preferredPosition = 'below',\n  willLoadMoreOptions,\n  height,\n  onScrolledToBottom,\n  onClose\n}) {\n  const [popoverActive, setPopoverActive] = useState(false);\n  const [activeOptionId, setActiveOptionId] = useState();\n  const [textFieldLabelId, setTextFieldLabelId] = useState();\n  const [listboxId, setListboxId] = useState();\n  const [textFieldFocused, setTextFieldFocused] = useState(false);\n  const shouldOpen = Boolean(!popoverActive && Children.count(children) > 0);\n  const ref = useRef(null);\n  const handleClose = useCallback(() => {\n    setPopoverActive(false);\n    onClose === null || onClose === void 0 ? void 0 : onClose();\n    setActiveOptionId(undefined);\n  }, [onClose]);\n  const handleOpen = useCallback(() => {\n    setPopoverActive(true);\n    setActiveOptionId(undefined);\n  }, []);\n  const onOptionSelected = useCallback(() => {\n    var _ref$current;\n\n    if (!allowMultiple) {\n      handleClose();\n      setActiveOptionId(undefined);\n      return;\n    }\n\n    (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.forceUpdatePosition();\n  }, [allowMultiple, handleClose]);\n  const handleFocus = useCallback(() => {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  const handleChange = useCallback(() => {\n    if (shouldOpen) {\n      handleOpen();\n    }\n  }, [shouldOpen, handleOpen]);\n  const handleBlur = useCallback(() => {\n    if (popoverActive) {\n      handleClose();\n    }\n  }, [popoverActive, handleClose]);\n  const textFieldContextValue = useMemo(() => ({\n    activeOptionId,\n    expanded: popoverActive,\n    listboxId,\n    setTextFieldFocused,\n    setTextFieldLabelId,\n    onTextFieldFocus: handleFocus,\n    onTextFieldChange: handleChange,\n    onTextFieldBlur: handleBlur\n  }), [activeOptionId, popoverActive, listboxId, setTextFieldFocused, setTextFieldLabelId, handleFocus, handleChange, handleBlur]);\n  const listboxOptionContextValue = useMemo(() => ({\n    allowMultiple\n  }), [allowMultiple]);\n  const listboxContextValue = useMemo(() => ({\n    listboxId,\n    textFieldLabelId,\n    textFieldFocused,\n    willLoadMoreOptions,\n    onOptionSelected,\n    setActiveOptionId,\n    setListboxId,\n    onKeyToBottom: onScrolledToBottom\n  }), [listboxId, textFieldLabelId, textFieldFocused, willLoadMoreOptions, onOptionSelected, setActiveOptionId, setListboxId, onScrolledToBottom]);\n  return /*#__PURE__*/React.createElement(Popover, {\n    ref: ref,\n    active: popoverActive,\n    activator: /*#__PURE__*/React.createElement(ComboboxTextFieldContext.Provider, {\n      value: textFieldContextValue\n    }, activator),\n    autofocusTarget: \"none\",\n    preventFocusOnClose: true,\n    fullWidth: true,\n    preferInputActivator: false,\n    preferredPosition: preferredPosition,\n    onClose: handleClose\n  }, Children.count(children) > 0 ? /*#__PURE__*/React.createElement(Popover.Pane, {\n    onScrolledToBottom: onScrolledToBottom,\n    height: height\n  }, /*#__PURE__*/React.createElement(ComboboxListboxContext.Provider, {\n    value: listboxContextValue\n  }, /*#__PURE__*/React.createElement(ComboboxListboxOptionContext.Provider, {\n    value: listboxOptionContextValue\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Listbox\n  }, children)))) : null);\n}\nCombobox.TextField = TextField;\n\nexport { Combobox };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}