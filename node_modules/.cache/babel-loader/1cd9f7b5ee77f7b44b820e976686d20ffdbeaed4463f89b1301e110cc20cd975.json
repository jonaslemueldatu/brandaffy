{"ast":null,"code":"import React, { useRef, useState, useEffect } from 'react';\nimport { CaretDownMinor, CancelSmallMinor } from '@shopify/polaris-icons';\nimport { useToggle } from '../../../../utilities/use-toggle.js';\nimport { useBreakpoints } from '../../../../utilities/breakpoints.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport styles from './FilterPill.scss.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Text } from '../../../Text/Text.js';\nimport { HorizontalStack } from '../../../HorizontalStack/HorizontalStack.js';\nimport { UnstyledButton } from '../../../UnstyledButton/UnstyledButton.js';\nimport { Icon } from '../../../Icon/Icon.js';\nimport { Button } from '../../../Button/Button.js';\nimport { Popover } from '../../../Popover/Popover.js';\nimport { VerticalStack } from '../../../VerticalStack/VerticalStack.js';\nfunction FilterPill(_ref) {\n  let {\n    filterKey,\n    label,\n    filter,\n    disabled,\n    hideClearButton,\n    selected,\n    initialActive,\n    closeOnChildOverlayClick,\n    onRemove,\n    onClick\n  } = _ref;\n  const i18n = useI18n();\n  const {\n    mdDown\n  } = useBreakpoints();\n  const elementRef = useRef(null);\n  const {\n    value: focused,\n    setTrue: setFocusedTrue,\n    setFalse: setFocusedFalse\n  } = useToggle(false);\n  const [popoverActive, setPopoverActive] = useState(initialActive);\n  useEffect(() => {\n    var _node$parentElement, _parent$scroll;\n    const node = elementRef.current;\n    if (!node || !popoverActive) {\n      return;\n    }\n    const parent = (_node$parentElement = node.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.parentElement;\n    if (!parent) {\n      return;\n    }\n    (_parent$scroll = parent.scroll) === null || _parent$scroll === void 0 ? void 0 : _parent$scroll.call(parent, {\n      left: node.offsetLeft\n    });\n  }, [elementRef, popoverActive]);\n  const togglePopoverActive = () => {\n    if (filter) {\n      setPopoverActive(popoverActive => !popoverActive);\n    }\n    if (onClick) {\n      onClick(filterKey);\n    }\n  };\n  const handleClear = () => {\n    if (onRemove) onRemove(filterKey);\n    setPopoverActive(false);\n  };\n  const buttonClasses = classNames(styles.FilterButton, selected && styles.ActiveFilterButton, popoverActive && styles.FocusFilterButton, focused && styles.focusedFilterButton, disabled && styles.disabledFilterButton);\n  const clearButtonClassNames = classNames(styles.PlainButton, styles.clearButton);\n  const toggleButtonClassNames = classNames(styles.PlainButton, styles.ToggleButton);\n  const wrappedLabel = /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Label\n  }, /*#__PURE__*/React.createElement(Text, {\n    variant: mdDown ? 'bodyMd' : 'bodySm',\n    as: \"span\"\n  }, label));\n  const activator = /*#__PURE__*/React.createElement(\"div\", {\n    className: buttonClasses\n  }, /*#__PURE__*/React.createElement(HorizontalStack, {\n    gap: \"0\",\n    wrap: false\n  }, /*#__PURE__*/React.createElement(UnstyledButton, {\n    onFocus: setFocusedTrue,\n    onBlur: setFocusedFalse,\n    onClick: togglePopoverActive,\n    className: toggleButtonClassNames,\n    type: \"button\",\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(HorizontalStack, {\n    wrap: false,\n    align: \"center\",\n    blockAlign: \"center\",\n    gap: \"0\"\n  }, selected ? /*#__PURE__*/React.createElement(React.Fragment, null, wrappedLabel) : /*#__PURE__*/React.createElement(React.Fragment, null, wrappedLabel, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.IconWrapper\n  }, /*#__PURE__*/React.createElement(Icon, {\n    source: CaretDownMinor,\n    color: \"base\"\n  }))))), selected ? /*#__PURE__*/React.createElement(UnstyledButton, {\n    onClick: handleClear,\n    className: clearButtonClassNames,\n    type: \"button\",\n    \"aria-label\": i18n.translate('Polaris.FilterPill.clear'),\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.IconWrapper\n  }, /*#__PURE__*/React.createElement(Icon, {\n    source: CancelSmallMinor,\n    color: \"base\"\n  }))) : null));\n  const clearButtonMarkup = !hideClearButton && /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClear,\n    plain: true,\n    disabled: !selected,\n    textAlign: \"left\"\n  }, i18n.translate('Polaris.FilterPill.clear'));\n  if (disabled) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: elementRef\n  }, /*#__PURE__*/React.createElement(Popover, {\n    active: popoverActive && !disabled,\n    activator: activator,\n    key: filterKey,\n    onClose: togglePopoverActive,\n    preferredAlignment: \"left\",\n    preventCloseOnChildOverlayClick: !closeOnChildOverlayClick\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.PopoverWrapper\n  }, /*#__PURE__*/React.createElement(Popover.Section, null, /*#__PURE__*/React.createElement(VerticalStack, {\n    gap: \"1\"\n  }, filter, clearButtonMarkup)))));\n}\nexport { FilterPill };","map":{"version":3,"names":["React","useRef","useState","useEffect","CaretDownMinor","CancelSmallMinor","useToggle","useBreakpoints","classNames","styles","useI18n","Text","HorizontalStack","UnstyledButton","Icon","Button","Popover","VerticalStack","FilterPill","_ref","filterKey","label","filter","disabled","hideClearButton","selected","initialActive","closeOnChildOverlayClick","onRemove","onClick","i18n","mdDown","elementRef","value","focused","setTrue","setFocusedTrue","setFalse","setFocusedFalse","popoverActive","setPopoverActive","_node$parentElement","_parent$scroll","node","current","parent","parentElement","scroll","call","left","offsetLeft","togglePopoverActive","handleClear","buttonClasses","FilterButton","ActiveFilterButton","FocusFilterButton","focusedFilterButton","disabledFilterButton","clearButtonClassNames","PlainButton","clearButton","toggleButtonClassNames","ToggleButton","wrappedLabel","createElement","className","Label","variant","as","activator","gap","wrap","onFocus","onBlur","type","align","blockAlign","Fragment","IconWrapper","source","color","translate","clearButtonMarkup","plain","textAlign","ref","active","key","onClose","preferredAlignment","preventCloseOnChildOverlayClick","PopoverWrapper","Section"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/AlphaFilters/components/FilterPill/FilterPill.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { CaretDownMinor, CancelSmallMinor } from '@shopify/polaris-icons';\nimport { useToggle } from '../../../../utilities/use-toggle.js';\nimport { useBreakpoints } from '../../../../utilities/breakpoints.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport styles from './FilterPill.scss.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Text } from '../../../Text/Text.js';\nimport { HorizontalStack } from '../../../HorizontalStack/HorizontalStack.js';\nimport { UnstyledButton } from '../../../UnstyledButton/UnstyledButton.js';\nimport { Icon } from '../../../Icon/Icon.js';\nimport { Button } from '../../../Button/Button.js';\nimport { Popover } from '../../../Popover/Popover.js';\nimport { VerticalStack } from '../../../VerticalStack/VerticalStack.js';\n\nfunction FilterPill({\n  filterKey,\n  label,\n  filter,\n  disabled,\n  hideClearButton,\n  selected,\n  initialActive,\n  closeOnChildOverlayClick,\n  onRemove,\n  onClick\n}) {\n  const i18n = useI18n();\n  const {\n    mdDown\n  } = useBreakpoints();\n  const elementRef = useRef(null);\n  const {\n    value: focused,\n    setTrue: setFocusedTrue,\n    setFalse: setFocusedFalse\n  } = useToggle(false);\n  const [popoverActive, setPopoverActive] = useState(initialActive);\n  useEffect(() => {\n    var _node$parentElement, _parent$scroll;\n\n    const node = elementRef.current;\n\n    if (!node || !popoverActive) {\n      return;\n    }\n\n    const parent = (_node$parentElement = node.parentElement) === null || _node$parentElement === void 0 ? void 0 : _node$parentElement.parentElement;\n\n    if (!parent) {\n      return;\n    }\n\n    (_parent$scroll = parent.scroll) === null || _parent$scroll === void 0 ? void 0 : _parent$scroll.call(parent, {\n      left: node.offsetLeft\n    });\n  }, [elementRef, popoverActive]);\n\n  const togglePopoverActive = () => {\n    if (filter) {\n      setPopoverActive(popoverActive => !popoverActive);\n    }\n\n    if (onClick) {\n      onClick(filterKey);\n    }\n  };\n\n  const handleClear = () => {\n    if (onRemove) onRemove(filterKey);\n    setPopoverActive(false);\n  };\n\n  const buttonClasses = classNames(styles.FilterButton, selected && styles.ActiveFilterButton, popoverActive && styles.FocusFilterButton, focused && styles.focusedFilterButton, disabled && styles.disabledFilterButton);\n  const clearButtonClassNames = classNames(styles.PlainButton, styles.clearButton);\n  const toggleButtonClassNames = classNames(styles.PlainButton, styles.ToggleButton);\n  const wrappedLabel = /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Label\n  }, /*#__PURE__*/React.createElement(Text, {\n    variant: mdDown ? 'bodyMd' : 'bodySm',\n    as: \"span\"\n  }, label));\n  const activator = /*#__PURE__*/React.createElement(\"div\", {\n    className: buttonClasses\n  }, /*#__PURE__*/React.createElement(HorizontalStack, {\n    gap: \"0\",\n    wrap: false\n  }, /*#__PURE__*/React.createElement(UnstyledButton, {\n    onFocus: setFocusedTrue,\n    onBlur: setFocusedFalse,\n    onClick: togglePopoverActive,\n    className: toggleButtonClassNames,\n    type: \"button\",\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(HorizontalStack, {\n    wrap: false,\n    align: \"center\",\n    blockAlign: \"center\",\n    gap: \"0\"\n  }, selected ? /*#__PURE__*/React.createElement(React.Fragment, null, wrappedLabel) : /*#__PURE__*/React.createElement(React.Fragment, null, wrappedLabel, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.IconWrapper\n  }, /*#__PURE__*/React.createElement(Icon, {\n    source: CaretDownMinor,\n    color: \"base\"\n  }))))), selected ? /*#__PURE__*/React.createElement(UnstyledButton, {\n    onClick: handleClear,\n    className: clearButtonClassNames,\n    type: \"button\",\n    \"aria-label\": i18n.translate('Polaris.FilterPill.clear'),\n    disabled: disabled\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.IconWrapper\n  }, /*#__PURE__*/React.createElement(Icon, {\n    source: CancelSmallMinor,\n    color: \"base\"\n  }))) : null));\n  const clearButtonMarkup = !hideClearButton && /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClear,\n    plain: true,\n    disabled: !selected,\n    textAlign: \"left\"\n  }, i18n.translate('Polaris.FilterPill.clear'));\n\n  if (disabled) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: elementRef\n  }, /*#__PURE__*/React.createElement(Popover, {\n    active: popoverActive && !disabled,\n    activator: activator,\n    key: filterKey,\n    onClose: togglePopoverActive,\n    preferredAlignment: \"left\",\n    preventCloseOnChildOverlayClick: !closeOnChildOverlayClick\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.PopoverWrapper\n  }, /*#__PURE__*/React.createElement(Popover.Section, null, /*#__PURE__*/React.createElement(VerticalStack, {\n    gap: \"1\"\n  }, filter, clearButtonMarkup)))));\n}\n\nexport { FilterPill };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}