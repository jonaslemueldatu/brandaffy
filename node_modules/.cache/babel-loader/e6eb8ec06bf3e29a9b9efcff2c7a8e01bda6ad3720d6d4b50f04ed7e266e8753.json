{"ast":null,"code":"import { useContext, useRef, useCallback } from 'react';\nimport { SELECT_ALL_ITEMS, SelectionType } from './types.js';\nimport { IndexSelectionChangeContext, IndexRowContext, IndexContext } from './context.js';\nimport { useI18n } from '../i18n/hooks.js';\nfunction useIndexSelectionChange() {\n  const onSelectionChange = useContext(IndexSelectionChangeContext);\n  if (!onSelectionChange) {\n    throw new Error(`Missing IndexProvider context`);\n  }\n  return onSelectionChange;\n}\nfunction useIndexRow() {\n  const indexRow = useContext(IndexRowContext);\n  if (!indexRow) {\n    throw new Error(`Missing IndexProvider context`);\n  }\n  return indexRow;\n}\nfunction useIndexValue() {\n  const index = useContext(IndexContext);\n  if (!index) {\n    throw new Error(`Missing IndexProvider context`);\n  }\n  return index;\n}\nfunction useBulkSelectionData(_ref) {\n  let {\n    selectedItemsCount,\n    itemCount,\n    hasMoreItems,\n    resourceName: passedResourceName\n  } = _ref;\n  const i18n = useI18n();\n  const selectable = Boolean(selectedItemsCount);\n  const selectMode = selectedItemsCount === 'All' || selectedItemsCount > 0;\n  const defaultResourceName = {\n    singular: i18n.translate('Polaris.IndexProvider.defaultItemSingular'),\n    plural: i18n.translate('Polaris.IndexProvider.defaultItemPlural')\n  };\n  const resourceName = passedResourceName ? passedResourceName : defaultResourceName;\n  const paginatedSelectAllText = getPaginatedSelectAllText();\n  const bulkActionsLabel = getBulkActionsLabel();\n  const bulkActionsAccessibilityLabel = getBulkActionsAccessibilityLabel();\n  let bulkSelectState = 'indeterminate';\n  if (!selectedItemsCount || selectedItemsCount === 0) {\n    bulkSelectState = undefined;\n  } else if (selectedItemsCount === SELECT_ALL_ITEMS || selectedItemsCount === itemCount) {\n    bulkSelectState = true;\n  }\n  return {\n    paginatedSelectAllText,\n    bulkActionsLabel,\n    bulkActionsAccessibilityLabel,\n    resourceName,\n    selectMode,\n    bulkSelectState,\n    selectable\n  };\n  function getPaginatedSelectAllText() {\n    if (!selectable || !hasMoreItems) {\n      return;\n    }\n    if (selectedItemsCount === SELECT_ALL_ITEMS) {\n      return i18n.translate('Polaris.IndexProvider.allItemsSelected', {\n        itemsLength: itemCount,\n        resourceNamePlural: resourceName.plural.toLocaleLowerCase()\n      });\n    }\n  }\n  function getBulkActionsLabel() {\n    const selectedItemsCountLabel = selectedItemsCount === SELECT_ALL_ITEMS ? `${itemCount}+` : selectedItemsCount;\n    return i18n.translate('Polaris.IndexProvider.selected', {\n      selectedItemsCount: selectedItemsCountLabel\n    });\n  }\n  function getBulkActionsAccessibilityLabel() {\n    const totalItemsCount = itemCount;\n    const allSelected = selectedItemsCount === totalItemsCount;\n    if (totalItemsCount === 1 && allSelected) {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxDeselectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (totalItemsCount === 1) {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxSelectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (allSelected) {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxDeselectAllMultiple', {\n        itemsLength: itemCount,\n        resourceNamePlural: resourceName.plural\n      });\n    } else {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxSelectAllMultiple', {\n        itemsLength: itemCount,\n        resourceNamePlural: resourceName.plural\n      });\n    }\n  }\n}\nfunction useHandleBulkSelection(_ref2) {\n  let {\n    onSelectionChange = () => {}\n  } = _ref2;\n  const lastSelected = useRef(null);\n  const handleSelectionChange = useCallback((selectionType, toggleType, selection, sortOrder) => {\n    const prevSelected = lastSelected.current;\n    if (SelectionType.Multi && typeof sortOrder === 'number') {\n      lastSelected.current = sortOrder;\n    }\n    if (selectionType === SelectionType.Single || selectionType === SelectionType.Multi && (typeof prevSelected !== 'number' || typeof sortOrder !== 'number')) {\n      onSelectionChange(SelectionType.Single, toggleType, selection);\n    } else if (selectionType === SelectionType.Multi) {\n      const min = Math.min(prevSelected, sortOrder);\n      const max = Math.max(prevSelected, sortOrder);\n      onSelectionChange(selectionType, toggleType, [min, max]);\n    } else if (selectionType === SelectionType.Page || selectionType === SelectionType.All) {\n      onSelectionChange(selectionType, toggleType);\n    }\n  }, [onSelectionChange]);\n  return handleSelectionChange;\n}\nexport { useBulkSelectionData, useHandleBulkSelection, useIndexRow, useIndexSelectionChange, useIndexValue };","map":{"version":3,"names":["useContext","useRef","useCallback","SELECT_ALL_ITEMS","SelectionType","IndexSelectionChangeContext","IndexRowContext","IndexContext","useI18n","useIndexSelectionChange","onSelectionChange","Error","useIndexRow","indexRow","useIndexValue","index","useBulkSelectionData","_ref","selectedItemsCount","itemCount","hasMoreItems","resourceName","passedResourceName","i18n","selectable","Boolean","selectMode","defaultResourceName","singular","translate","plural","paginatedSelectAllText","getPaginatedSelectAllText","bulkActionsLabel","getBulkActionsLabel","bulkActionsAccessibilityLabel","getBulkActionsAccessibilityLabel","bulkSelectState","undefined","itemsLength","resourceNamePlural","toLocaleLowerCase","selectedItemsCountLabel","totalItemsCount","allSelected","resourceNameSingular","useHandleBulkSelection","_ref2","lastSelected","handleSelectionChange","selectionType","toggleType","selection","sortOrder","prevSelected","current","Multi","Single","min","Math","max","Page","All"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/utilities/index-provider/hooks.js"],"sourcesContent":["import { useContext, useRef, useCallback } from 'react';\nimport { SELECT_ALL_ITEMS, SelectionType } from './types.js';\nimport { IndexSelectionChangeContext, IndexRowContext, IndexContext } from './context.js';\nimport { useI18n } from '../i18n/hooks.js';\n\nfunction useIndexSelectionChange() {\n  const onSelectionChange = useContext(IndexSelectionChangeContext);\n\n  if (!onSelectionChange) {\n    throw new Error(`Missing IndexProvider context`);\n  }\n\n  return onSelectionChange;\n}\nfunction useIndexRow() {\n  const indexRow = useContext(IndexRowContext);\n\n  if (!indexRow) {\n    throw new Error(`Missing IndexProvider context`);\n  }\n\n  return indexRow;\n}\nfunction useIndexValue() {\n  const index = useContext(IndexContext);\n\n  if (!index) {\n    throw new Error(`Missing IndexProvider context`);\n  }\n\n  return index;\n}\nfunction useBulkSelectionData({\n  selectedItemsCount,\n  itemCount,\n  hasMoreItems,\n  resourceName: passedResourceName\n}) {\n  const i18n = useI18n();\n  const selectable = Boolean(selectedItemsCount);\n  const selectMode = selectedItemsCount === 'All' || selectedItemsCount > 0;\n  const defaultResourceName = {\n    singular: i18n.translate('Polaris.IndexProvider.defaultItemSingular'),\n    plural: i18n.translate('Polaris.IndexProvider.defaultItemPlural')\n  };\n  const resourceName = passedResourceName ? passedResourceName : defaultResourceName;\n  const paginatedSelectAllText = getPaginatedSelectAllText();\n  const bulkActionsLabel = getBulkActionsLabel();\n  const bulkActionsAccessibilityLabel = getBulkActionsAccessibilityLabel();\n  let bulkSelectState = 'indeterminate';\n\n  if (!selectedItemsCount || selectedItemsCount === 0) {\n    bulkSelectState = undefined;\n  } else if (selectedItemsCount === SELECT_ALL_ITEMS || selectedItemsCount === itemCount) {\n    bulkSelectState = true;\n  }\n\n  return {\n    paginatedSelectAllText,\n    bulkActionsLabel,\n    bulkActionsAccessibilityLabel,\n    resourceName,\n    selectMode,\n    bulkSelectState,\n    selectable\n  };\n\n  function getPaginatedSelectAllText() {\n    if (!selectable || !hasMoreItems) {\n      return;\n    }\n\n    if (selectedItemsCount === SELECT_ALL_ITEMS) {\n      return i18n.translate('Polaris.IndexProvider.allItemsSelected', {\n        itemsLength: itemCount,\n        resourceNamePlural: resourceName.plural.toLocaleLowerCase()\n      });\n    }\n  }\n\n  function getBulkActionsLabel() {\n    const selectedItemsCountLabel = selectedItemsCount === SELECT_ALL_ITEMS ? `${itemCount}+` : selectedItemsCount;\n    return i18n.translate('Polaris.IndexProvider.selected', {\n      selectedItemsCount: selectedItemsCountLabel\n    });\n  }\n\n  function getBulkActionsAccessibilityLabel() {\n    const totalItemsCount = itemCount;\n    const allSelected = selectedItemsCount === totalItemsCount;\n\n    if (totalItemsCount === 1 && allSelected) {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxDeselectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (totalItemsCount === 1) {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxSelectAllSingle', {\n        resourceNameSingular: resourceName.singular\n      });\n    } else if (allSelected) {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxDeselectAllMultiple', {\n        itemsLength: itemCount,\n        resourceNamePlural: resourceName.plural\n      });\n    } else {\n      return i18n.translate('Polaris.IndexProvider.a11yCheckboxSelectAllMultiple', {\n        itemsLength: itemCount,\n        resourceNamePlural: resourceName.plural\n      });\n    }\n  }\n}\nfunction useHandleBulkSelection({\n  onSelectionChange = () => {}\n}) {\n  const lastSelected = useRef(null);\n  const handleSelectionChange = useCallback((selectionType, toggleType, selection, sortOrder) => {\n    const prevSelected = lastSelected.current;\n\n    if (SelectionType.Multi && typeof sortOrder === 'number') {\n      lastSelected.current = sortOrder;\n    }\n\n    if (selectionType === SelectionType.Single || selectionType === SelectionType.Multi && (typeof prevSelected !== 'number' || typeof sortOrder !== 'number')) {\n      onSelectionChange(SelectionType.Single, toggleType, selection);\n    } else if (selectionType === SelectionType.Multi) {\n      const min = Math.min(prevSelected, sortOrder);\n      const max = Math.max(prevSelected, sortOrder);\n      onSelectionChange(selectionType, toggleType, [min, max]);\n    } else if (selectionType === SelectionType.Page || selectionType === SelectionType.All) {\n      onSelectionChange(selectionType, toggleType);\n    }\n  }, [onSelectionChange]);\n  return handleSelectionChange;\n}\n\nexport { useBulkSelectionData, useHandleBulkSelection, useIndexRow, useIndexSelectionChange, useIndexValue };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}