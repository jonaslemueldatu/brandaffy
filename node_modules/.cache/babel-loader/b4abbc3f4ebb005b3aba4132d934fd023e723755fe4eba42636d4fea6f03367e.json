{"ast":null,"code":"import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport { focusFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { useIsTouchDevice } from '../../../../utilities/use-is-touch-device.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Button } from '../../../Button/Button.js';\nimport { HorizontalStack } from '../../../HorizontalStack/HorizontalStack.js';\nimport { Modal } from '../../../Modal/Modal.js';\nimport { Form } from '../../../Form/Form.js';\nimport { FormLayout } from '../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../TextField/TextField.js';\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction UpdateButtons(_ref) {\n  let {\n    primaryAction,\n    cancelAction,\n    viewNames,\n    disabled\n  } = _ref;\n  const i18n = useI18n();\n  const [savedViewName, setSavedViewName] = useState('');\n  const [savedViewModalOpen, setSavedViewModalOpen] = useState(false);\n  const container = useRef(null);\n  const isTouchDevice = useIsTouchDevice();\n  useEffect(() => {\n    if (!container.current || isTouchDevice) return;\n    if (savedViewModalOpen) {\n      focusFirstFocusableNode(container.current);\n    }\n  }, [savedViewModalOpen, isTouchDevice]);\n  async function handleClickSaveButton() {\n    if ((primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.type) === 'save-as') {\n      handleOpenModal();\n    } else {\n      await (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.onAction(''));\n    }\n  }\n  function handleOpenModal() {\n    setSavedViewModalOpen(true);\n  }\n  function handleCloseModal() {\n    setSavedViewModalOpen(false);\n  }\n  function handleChange(value) {\n    setSavedViewName(value);\n  }\n  async function handlePrimaryAction() {\n    if (isPrimaryActionDisabled) return;\n    await (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.onAction(savedViewName));\n    handleCloseModal();\n  }\n  const buttonText = useMemo(() => {\n    switch (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.type) {\n      case 'save':\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.save');\n      case 'save-as':\n      default:\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.saveAs');\n    }\n  }, [primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.type, i18n]);\n  const saveButton = /*#__PURE__*/React.createElement(Button, {\n    size: \"micro\",\n    primary: true,\n    plain: true,\n    onClick: handleClickSaveButton,\n    disabled: (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.disabled) || disabled\n  }, buttonText);\n  const hasSameNameError = viewNames.some(name => name.trim().toLowerCase() === savedViewName.trim().toLowerCase());\n  const isPrimaryActionDisabled = hasSameNameError || !savedViewName || (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.loading) || savedViewName.length > MAX_VIEW_NAME_LENGTH;\n  const cancelButtonMarkup = /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    size: \"micro\",\n    onClick: cancelAction.onAction,\n    disabled: disabled\n  }, i18n.translate('Polaris.IndexFilters.UpdateButtons.cancel'));\n  if (!primaryAction) {\n    return cancelButtonMarkup;\n  }\n  return /*#__PURE__*/React.createElement(HorizontalStack, {\n    align: \"start\",\n    blockAlign: \"center\",\n    gap: \"2\"\n  }, cancelButtonMarkup, primaryAction.type === 'save-as' ? /*#__PURE__*/React.createElement(Modal, {\n    activator: /*#__PURE__*/React.createElement(HorizontalStack, null, saveButton),\n    open: savedViewModalOpen,\n    title: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.title'),\n    onClose: handleCloseModal,\n    primaryAction: {\n      onAction: handlePrimaryAction,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.save'),\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      onAction: handleCloseModal,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.cancel')\n    }]\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.label'),\n    value: savedViewName,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.sameName', {\n      name: savedViewName\n    }) : undefined\n  })))))) : saveButton);\n}\nexport { UpdateButtons };","map":{"version":3,"names":["React","useState","useRef","useEffect","useMemo","focusFirstFocusableNode","useIsTouchDevice","useI18n","Button","HorizontalStack","Modal","Form","FormLayout","TextField","MAX_VIEW_NAME_LENGTH","UpdateButtons","_ref","primaryAction","cancelAction","viewNames","disabled","i18n","savedViewName","setSavedViewName","savedViewModalOpen","setSavedViewModalOpen","container","isTouchDevice","current","handleClickSaveButton","type","handleOpenModal","onAction","handleCloseModal","handleChange","value","handlePrimaryAction","isPrimaryActionDisabled","buttonText","translate","saveButton","createElement","size","primary","plain","onClick","hasSameNameError","some","name","trim","toLowerCase","loading","length","cancelButtonMarkup","align","blockAlign","gap","activator","open","title","onClose","content","secondaryActions","Section","onSubmit","ref","label","onChange","autoComplete","maxLength","showCharacterCount","error","undefined"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/IndexFilters/components/UpdateButtons/UpdateButtons.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useMemo } from 'react';\nimport { focusFirstFocusableNode } from '../../../../utilities/focus.js';\nimport { useIsTouchDevice } from '../../../../utilities/use-is-touch-device.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { Button } from '../../../Button/Button.js';\nimport { HorizontalStack } from '../../../HorizontalStack/HorizontalStack.js';\nimport { Modal } from '../../../Modal/Modal.js';\nimport { Form } from '../../../Form/Form.js';\nimport { FormLayout } from '../../../FormLayout/FormLayout.js';\nimport { TextField } from '../../../TextField/TextField.js';\n\nconst MAX_VIEW_NAME_LENGTH = 40;\nfunction UpdateButtons({\n  primaryAction,\n  cancelAction,\n  viewNames,\n  disabled\n}) {\n  const i18n = useI18n();\n  const [savedViewName, setSavedViewName] = useState('');\n  const [savedViewModalOpen, setSavedViewModalOpen] = useState(false);\n  const container = useRef(null);\n  const isTouchDevice = useIsTouchDevice();\n  useEffect(() => {\n    if (!container.current || isTouchDevice) return;\n\n    if (savedViewModalOpen) {\n      focusFirstFocusableNode(container.current);\n    }\n  }, [savedViewModalOpen, isTouchDevice]);\n\n  async function handleClickSaveButton() {\n    if ((primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.type) === 'save-as') {\n      handleOpenModal();\n    } else {\n      await (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.onAction(''));\n    }\n  }\n\n  function handleOpenModal() {\n    setSavedViewModalOpen(true);\n  }\n\n  function handleCloseModal() {\n    setSavedViewModalOpen(false);\n  }\n\n  function handleChange(value) {\n    setSavedViewName(value);\n  }\n\n  async function handlePrimaryAction() {\n    if (isPrimaryActionDisabled) return;\n    await (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.onAction(savedViewName));\n    handleCloseModal();\n  }\n\n  const buttonText = useMemo(() => {\n    switch (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.type) {\n      case 'save':\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.save');\n\n      case 'save-as':\n      default:\n        return i18n.translate('Polaris.IndexFilters.UpdateButtons.saveAs');\n    }\n  }, [primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.type, i18n]);\n  const saveButton = /*#__PURE__*/React.createElement(Button, {\n    size: \"micro\",\n    primary: true,\n    plain: true,\n    onClick: handleClickSaveButton,\n    disabled: (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.disabled) || disabled\n  }, buttonText);\n  const hasSameNameError = viewNames.some(name => name.trim().toLowerCase() === savedViewName.trim().toLowerCase());\n  const isPrimaryActionDisabled = hasSameNameError || !savedViewName || (primaryAction === null || primaryAction === void 0 ? void 0 : primaryAction.loading) || savedViewName.length > MAX_VIEW_NAME_LENGTH;\n  const cancelButtonMarkup = /*#__PURE__*/React.createElement(Button, {\n    plain: true,\n    size: \"micro\",\n    onClick: cancelAction.onAction,\n    disabled: disabled\n  }, i18n.translate('Polaris.IndexFilters.UpdateButtons.cancel'));\n\n  if (!primaryAction) {\n    return cancelButtonMarkup;\n  }\n\n  return /*#__PURE__*/React.createElement(HorizontalStack, {\n    align: \"start\",\n    blockAlign: \"center\",\n    gap: \"2\"\n  }, cancelButtonMarkup, primaryAction.type === 'save-as' ? /*#__PURE__*/React.createElement(Modal, {\n    activator: /*#__PURE__*/React.createElement(HorizontalStack, null, saveButton),\n    open: savedViewModalOpen,\n    title: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.title'),\n    onClose: handleCloseModal,\n    primaryAction: {\n      onAction: handlePrimaryAction,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.save'),\n      disabled: isPrimaryActionDisabled\n    },\n    secondaryActions: [{\n      onAction: handleCloseModal,\n      content: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.cancel')\n    }]\n  }, /*#__PURE__*/React.createElement(Modal.Section, null, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handlePrimaryAction\n  }, /*#__PURE__*/React.createElement(FormLayout, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: container\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.label'),\n    value: savedViewName,\n    onChange: handleChange,\n    autoComplete: \"off\",\n    maxLength: MAX_VIEW_NAME_LENGTH,\n    showCharacterCount: true,\n    error: hasSameNameError ? i18n.translate('Polaris.IndexFilters.UpdateButtons.modal.sameName', {\n      name: savedViewName\n    }) : undefined\n  })))))) : saveButton);\n}\n\nexport { UpdateButtons };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}