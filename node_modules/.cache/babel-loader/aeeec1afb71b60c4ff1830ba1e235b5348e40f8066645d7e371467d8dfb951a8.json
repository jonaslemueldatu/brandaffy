{"ast":null,"code":"import React, { PureComponent, createRef } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { debounce } from '../../utilities/debounce.js';\nimport { classNames } from '../../utilities/css.js';\nimport { headerCell } from '../shared.js';\nimport { measureColumn, getPrevAndCurrentColumns } from './utilities.js';\nimport styles from './DataTable.scss.js';\nimport { Cell } from './components/Cell/Cell.js';\nimport { AfterInitialMount } from '../AfterInitialMount/AfterInitialMount.js';\nimport { Sticky } from '../Sticky/Sticky.js';\nimport { Navigation } from './components/Navigation/Navigation.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { EventListener } from '../EventListener/EventListener.js';\nconst getRowClientHeights = rows => {\n  const heights = [];\n  if (!rows) {\n    return heights;\n  }\n  rows.forEach(row => {\n    heights.push(row.clientHeight);\n  });\n  return heights;\n};\nclass DataTableInner extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      condensed: false,\n      columnVisibilityData: [],\n      isScrolledFarthestLeft: true,\n      isScrolledFarthestRight: false,\n      rowHovered: undefined\n    };\n    this.dataTable = /*#__PURE__*/createRef();\n    this.scrollContainer = /*#__PURE__*/createRef();\n    this.table = /*#__PURE__*/createRef();\n    this.stickyTable = /*#__PURE__*/createRef();\n    this.stickyNav = null;\n    this.headerNav = null;\n    this.tableHeadings = [];\n    this.stickyHeadings = [];\n    this.tableHeadingWidths = [];\n    this.stickyHeaderActive = false;\n    this.scrollStopTimer = null;\n    this.handleResize = debounce(() => {\n      const {\n        table: {\n          current: table\n        },\n        scrollContainer: {\n          current: scrollContainer\n        }\n      } = this;\n      let condensed = false;\n      if (table && scrollContainer) {\n        // safari sometimes incorrectly sets the scrollwidth too large by 1px\n        condensed = table.scrollWidth > scrollContainer.clientWidth + 1;\n      }\n      this.setState({\n        condensed,\n        ...this.calculateColumnVisibilityData(condensed)\n      });\n    });\n    this.setCellRef = _ref => {\n      let {\n        ref,\n        index,\n        inStickyHeader\n      } = _ref;\n      if (ref == null) {\n        return;\n      }\n      if (inStickyHeader) {\n        this.stickyHeadings[index] = ref;\n        const button = ref.querySelector('button');\n        if (button == null) {\n          return;\n        }\n        button.addEventListener('focus', this.handleHeaderButtonFocus);\n      } else {\n        this.tableHeadings[index] = ref;\n        this.tableHeadingWidths[index] = ref.clientWidth;\n      }\n    };\n    this.changeHeadingFocus = () => {\n      const {\n        tableHeadings,\n        stickyHeadings,\n        stickyNav,\n        headerNav\n      } = this;\n      const stickyFocusedItemIndex = stickyHeadings.findIndex(item => {\n        var _document$activeEleme;\n        return item === ((_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.parentElement);\n      });\n      const tableFocusedItemIndex = tableHeadings.findIndex(item => {\n        var _document$activeEleme2;\n        return item === ((_document$activeEleme2 = document.activeElement) === null || _document$activeEleme2 === void 0 ? void 0 : _document$activeEleme2.parentElement);\n      });\n      const arrowsInStickyNav = stickyNav === null || stickyNav === void 0 ? void 0 : stickyNav.querySelectorAll('button');\n      const arrowsInHeaderNav = headerNav === null || headerNav === void 0 ? void 0 : headerNav.querySelectorAll('button');\n      let stickyFocusedNavIndex = -1;\n      arrowsInStickyNav === null || arrowsInStickyNav === void 0 ? void 0 : arrowsInStickyNav.forEach((item, index) => {\n        if (item === document.activeElement) {\n          stickyFocusedNavIndex = index;\n        }\n      });\n      let headerFocusedNavIndex = -1;\n      arrowsInHeaderNav === null || arrowsInHeaderNav === void 0 ? void 0 : arrowsInHeaderNav.forEach((item, index) => {\n        if (item === document.activeElement) {\n          headerFocusedNavIndex = index;\n        }\n      });\n      if (stickyFocusedItemIndex < 0 && tableFocusedItemIndex < 0 && stickyFocusedNavIndex < 0 && headerFocusedNavIndex < 0) {\n        return null;\n      }\n      let button;\n      if (stickyFocusedItemIndex >= 0) {\n        button = tableHeadings[stickyFocusedItemIndex].querySelector('button');\n      } else if (tableFocusedItemIndex >= 0) {\n        button = stickyHeadings[tableFocusedItemIndex].querySelector('button');\n      }\n      if (stickyFocusedNavIndex >= 0) {\n        button = arrowsInHeaderNav === null || arrowsInHeaderNav === void 0 ? void 0 : arrowsInHeaderNav[stickyFocusedNavIndex];\n      } else if (headerFocusedNavIndex >= 0) {\n        button = arrowsInStickyNav === null || arrowsInStickyNav === void 0 ? void 0 : arrowsInStickyNav[headerFocusedNavIndex];\n      }\n      if (button == null) {\n        return null;\n      }\n      button.style.visibility = 'visible';\n      button.focus();\n      button.style.removeProperty('visibility');\n    };\n    this.calculateColumnVisibilityData = condensed => {\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const {\n        table: {\n          current: table\n        },\n        scrollContainer: {\n          current: scrollContainer\n        },\n        dataTable: {\n          current: dataTable\n        }\n      } = this;\n      const {\n        stickyHeader\n      } = this.props;\n      if ((stickyHeader || condensed) && table && scrollContainer && dataTable) {\n        const headerCells = table.querySelectorAll(headerCell.selector);\n        const rightMostHeader = headerCells[fixedFirstColumns - 1];\n        const nthColumnWidth = fixedFirstColumns ? rightMostHeader.offsetLeft + rightMostHeader.offsetWidth : 0;\n        if (headerCells.length > 0) {\n          const firstVisibleColumnIndex = headerCells.length - 1;\n          const tableLeftVisibleEdge = scrollContainer.scrollLeft + nthColumnWidth;\n          const tableRightVisibleEdge = scrollContainer.scrollLeft + dataTable.offsetWidth;\n          const tableData = {\n            firstVisibleColumnIndex,\n            tableLeftVisibleEdge,\n            tableRightVisibleEdge\n          };\n          const columnVisibilityData = [...headerCells].map(measureColumn(tableData));\n          const lastColumn = columnVisibilityData[columnVisibilityData.length - 1];\n          const isScrolledFarthestLeft = fixedFirstColumns ? tableLeftVisibleEdge === nthColumnWidth : tableLeftVisibleEdge === 0;\n          return {\n            columnVisibilityData,\n            ...getPrevAndCurrentColumns(tableData, columnVisibilityData),\n            isScrolledFarthestLeft,\n            isScrolledFarthestRight: lastColumn.rightEdge <= tableRightVisibleEdge\n          };\n        }\n      }\n      return {\n        columnVisibilityData: [],\n        previousColumn: undefined,\n        currentColumn: undefined\n      };\n    };\n    this.handleHeaderButtonFocus = event => {\n      var _this$state$columnVis;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      if (this.scrollContainer.current == null || event.target == null || this.state.columnVisibilityData.length === 0) {\n        return;\n      }\n      const target = event.target;\n      const currentCell = target.parentNode;\n      const tableScrollLeft = this.scrollContainer.current.scrollLeft;\n      const tableViewableWidth = this.scrollContainer.current.offsetWidth;\n      const tableRightEdge = tableScrollLeft + tableViewableWidth;\n      const nthColumnWidth = this.state.columnVisibilityData.length > 0 ? (_this$state$columnVis = this.state.columnVisibilityData[fixedFirstColumns]) === null || _this$state$columnVis === void 0 ? void 0 : _this$state$columnVis.rightEdge : 0;\n      const currentColumnLeftEdge = currentCell.offsetLeft;\n      const currentColumnRightEdge = currentCell.offsetLeft + currentCell.offsetWidth;\n      if (tableScrollLeft > currentColumnLeftEdge - nthColumnWidth) {\n        this.scrollContainer.current.scrollLeft = currentColumnLeftEdge - nthColumnWidth;\n      }\n      if (currentColumnRightEdge > tableRightEdge) {\n        this.scrollContainer.current.scrollLeft = currentColumnRightEdge - tableViewableWidth;\n      }\n    };\n    this.stickyHeaderScrolling = () => {\n      const {\n        current: stickyTable\n      } = this.stickyTable;\n      const {\n        current: scrollContainer\n      } = this.scrollContainer;\n      if (stickyTable == null || scrollContainer == null) {\n        return;\n      }\n      stickyTable.scrollLeft = scrollContainer.scrollLeft;\n    };\n    this.scrollListener = () => {\n      var _this$scrollContainer;\n      if (this.scrollStopTimer) {\n        clearTimeout(this.scrollStopTimer);\n      }\n      this.scrollStopTimer = setTimeout(() => {\n        this.setState(prevState => ({\n          ...this.calculateColumnVisibilityData(prevState.condensed)\n        }));\n      }, 100);\n      this.setState({\n        isScrolledFarthestLeft: ((_this$scrollContainer = this.scrollContainer.current) === null || _this$scrollContainer === void 0 ? void 0 : _this$scrollContainer.scrollLeft) === 0\n      });\n      if (this.props.stickyHeader && this.stickyHeaderActive) {\n        this.stickyHeaderScrolling();\n      }\n    };\n    this.handleHover = row => () => {\n      this.setState({\n        rowHovered: row\n      });\n    };\n    this.handleFocus = event => {\n      var _this$state$columnVis2;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      if (this.scrollContainer.current == null || event.target == null) {\n        return;\n      }\n      const currentCell = event.target.parentNode;\n      const fixedNthColumn = this.props;\n      const nthColumnWidth = fixedNthColumn ? (_this$state$columnVis2 = this.state.columnVisibilityData[fixedFirstColumns]) === null || _this$state$columnVis2 === void 0 ? void 0 : _this$state$columnVis2.rightEdge : 0;\n      const currentColumnLeftEdge = currentCell.offsetLeft;\n      const desiredScrollLeft = currentColumnLeftEdge - nthColumnWidth;\n      if (this.scrollContainer.current.scrollLeft > desiredScrollLeft) {\n        this.scrollContainer.current.scrollLeft = desiredScrollLeft;\n      } // focus fixed first column if present\n    };\n\n    this.navigateTable = direction => {\n      var _this$state$columnVis3;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const {\n        currentColumn,\n        previousColumn\n      } = this.state;\n      const nthColumnWidth = (_this$state$columnVis3 = this.state.columnVisibilityData[fixedFirstColumns - 1]) === null || _this$state$columnVis3 === void 0 ? void 0 : _this$state$columnVis3.rightEdge;\n      if (!currentColumn || !previousColumn) {\n        return;\n      }\n      let prevWidths = 0;\n      for (let index = 0; index < currentColumn.index; index++) {\n        prevWidths += this.state.columnVisibilityData[index].width;\n      }\n      const {\n        current: scrollContainer\n      } = this.scrollContainer;\n      const handleScroll = () => {\n        let newScrollLeft = 0;\n        if (fixedFirstColumns) {\n          newScrollLeft = direction === 'right' ? prevWidths - nthColumnWidth + currentColumn.width : prevWidths - previousColumn.width - nthColumnWidth;\n        } else {\n          newScrollLeft = direction === 'right' ? currentColumn.rightEdge : previousColumn.leftEdge;\n        }\n        if (scrollContainer) {\n          scrollContainer.scrollLeft = newScrollLeft;\n          requestAnimationFrame(() => {\n            this.setState(prevState => ({\n              ...this.calculateColumnVisibilityData(prevState.condensed)\n            }));\n          });\n        }\n      };\n      return handleScroll;\n    };\n    this.renderHeading = _ref2 => {\n      let {\n        heading,\n        headingIndex,\n        inFixedNthColumn,\n        inStickyHeader\n      } = _ref2;\n      const {\n        sortable,\n        truncate = false,\n        columnContentTypes,\n        defaultSortDirection,\n        initialSortColumnIndex = 0,\n        verticalAlign,\n        firstColumnMinWidth\n      } = this.props;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const {\n        sortDirection = defaultSortDirection,\n        sortedColumnIndex = initialSortColumnIndex,\n        isScrolledFarthestLeft\n      } = this.state;\n      let sortableHeadingProps;\n      const headingCellId = `heading-cell-${headingIndex}`;\n      const stickyHeaderId = `stickyheader-${headingIndex}`;\n      const id = inStickyHeader ? stickyHeaderId : headingCellId;\n      if (sortable) {\n        const isSortable = sortable[headingIndex];\n        const isSorted = isSortable && sortedColumnIndex === headingIndex;\n        const direction = isSorted ? sortDirection : 'none';\n        sortableHeadingProps = {\n          defaultSortDirection,\n          sorted: isSorted,\n          sortable: isSortable,\n          sortDirection: direction,\n          onSort: this.defaultOnSort(headingIndex),\n          fixedNthColumn: fixedFirstColumns,\n          inFixedNthColumn: fixedFirstColumns\n        };\n      }\n      const stickyCellWidth = inStickyHeader ? this.tableHeadingWidths[headingIndex] : undefined;\n      const fixedCellVisible = !isScrolledFarthestLeft;\n      const cellProps = {\n        header: true,\n        stickyHeadingCell: inStickyHeader,\n        content: heading,\n        contentType: columnContentTypes[headingIndex],\n        nthColumn: headingIndex < fixedFirstColumns,\n        fixedFirstColumns,\n        truncate,\n        headingIndex,\n        ...sortableHeadingProps,\n        verticalAlign,\n        handleFocus: this.handleFocus,\n        stickyCellWidth,\n        fixedCellVisible,\n        firstColumnMinWidth\n      };\n      if (inFixedNthColumn && inStickyHeader) {\n        var _this$state$columnVis4;\n\n        // need two cells for fixed first column (actual cell and the overlapping one)\n        // the sticky cell is second so that the index is associated with the sticky\n        // cell and not the underlying one. This helps `changeHeadingFocus` to put\n        // focus on the right cell when switching from sticky to non-sticky headers\n        return [/*#__PURE__*/React.createElement(Cell, Object.assign({\n          key: id\n        }, cellProps, {\n          setRef: ref => {\n            this.setCellRef({\n              ref,\n              index: headingIndex,\n              inStickyHeader\n            });\n          },\n          inFixedNthColumn: false\n        })), /*#__PURE__*/React.createElement(Cell, Object.assign({\n          key: `${id}-sticky`\n        }, cellProps, {\n          setRef: ref => {\n            this.setCellRef({\n              ref,\n              index: headingIndex,\n              inStickyHeader\n            });\n          },\n          inFixedNthColumn: Boolean(fixedFirstColumns),\n          lastFixedFirstColumn: headingIndex === fixedFirstColumns - 1,\n          style: {\n            left: (_this$state$columnVis4 = this.state.columnVisibilityData[headingIndex]) === null || _this$state$columnVis4 === void 0 ? void 0 : _this$state$columnVis4.leftEdge\n          }\n        }))];\n      }\n      return /*#__PURE__*/React.createElement(Cell, Object.assign({\n        key: id\n      }, cellProps, {\n        setRef: ref => {\n          this.setCellRef({\n            ref,\n            index: headingIndex,\n            inStickyHeader\n          });\n        },\n        lastFixedFirstColumn: headingIndex === fixedFirstColumns - 1,\n        inFixedNthColumn: inFixedNthColumn\n      }));\n    };\n    this.totalsRowHeading = () => {\n      const {\n        i18n,\n        totals,\n        totalsName\n      } = this.props;\n      const totalsLabel = totalsName ? totalsName : {\n        singular: i18n.translate('Polaris.DataTable.totalRowHeading'),\n        plural: i18n.translate('Polaris.DataTable.totalsRowHeading')\n      };\n      return totals && totals.filter(total => total !== '').length > 1 ? totalsLabel.plural : totalsLabel.singular;\n    };\n    this.renderTotals = _ref3 => {\n      let {\n        total,\n        index\n      } = _ref3;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const id = `totals-cell-${index}`;\n      const {\n        truncate = false,\n        verticalAlign,\n        columnContentTypes\n      } = this.props;\n      let content;\n      let contentType;\n      if (index === 0) {\n        content = this.totalsRowHeading();\n      }\n      if (total !== '' && index > 0) {\n        contentType = columnContentTypes[index];\n        content = total;\n      }\n      const totalInFooter = this.props.showTotalsInFooter;\n      return /*#__PURE__*/React.createElement(Cell, {\n        total: true,\n        totalInFooter: totalInFooter,\n        nthColumn: index <= fixedFirstColumns - 1,\n        firstColumn: index === 0,\n        key: id,\n        content: content,\n        contentType: contentType,\n        truncate: truncate,\n        verticalAlign: verticalAlign\n      });\n    };\n    this.getColSpan = (rowLength, headingsLength, contentTypesLength, cellIndex) => {\n      // We decided that it shouldn't be possible to have fixed \"n\" columns and content that spans multiple columns\n      const fixedFirstColumns = this.fixedFirstColumns();\n      if (fixedFirstColumns) {\n        return 1;\n      }\n      const rowLen = rowLength ? rowLength : 1;\n      const colLen = headingsLength ? headingsLength : contentTypesLength;\n      const colSpan = Math.floor(colLen / rowLen);\n      const remainder = colLen % rowLen;\n      return cellIndex === 0 ? colSpan + remainder : colSpan;\n    };\n    this.defaultRenderRow = _ref4 => {\n      let {\n        row,\n        index,\n        inFixedNthColumn,\n        rowHeights\n      } = _ref4;\n      const {\n        columnContentTypes,\n        truncate = false,\n        verticalAlign,\n        hoverable = true,\n        headings\n      } = this.props;\n      const {\n        condensed\n      } = this.state;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const className = classNames(styles.TableRow, hoverable && styles.hoverable);\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: `row-${index}`,\n        className: className,\n        onMouseEnter: this.handleHover(index),\n        onMouseLeave: this.handleHover()\n      }, row.map((content, cellIndex) => {\n        const hovered = index === this.state.rowHovered;\n        const id = `cell-${cellIndex}-row-${index}`;\n        const colSpan = this.getColSpan(row.length, headings.length, columnContentTypes.length, cellIndex);\n        return /*#__PURE__*/React.createElement(Cell, {\n          key: id,\n          content: content,\n          contentType: columnContentTypes[cellIndex],\n          nthColumn: cellIndex <= fixedFirstColumns - 1,\n          firstColumn: cellIndex === 0,\n          truncate: truncate,\n          verticalAlign: verticalAlign,\n          colSpan: colSpan,\n          hovered: hovered,\n          style: rowHeights ? {\n            height: `${rowHeights[index]}px`\n          } : {},\n          inFixedNthColumn: condensed && inFixedNthColumn\n        });\n      }));\n    };\n    this.defaultOnSort = headingIndex => {\n      const {\n        onSort,\n        defaultSortDirection = 'ascending',\n        initialSortColumnIndex\n      } = this.props;\n      const {\n        sortDirection = defaultSortDirection,\n        sortedColumnIndex = initialSortColumnIndex\n      } = this.state;\n      let newSortDirection = defaultSortDirection;\n      if (sortedColumnIndex === headingIndex) {\n        newSortDirection = sortDirection === 'ascending' ? 'descending' : 'ascending';\n      }\n      const handleSort = () => {\n        this.setState({\n          sortDirection: newSortDirection,\n          sortedColumnIndex: headingIndex\n        }, () => {\n          if (onSort) {\n            onSort(headingIndex, newSortDirection);\n          }\n        });\n      };\n      return handleSort;\n    };\n  }\n  componentDidMount() {\n    // We need to defer the calculation in development so the styles have time to be injected.\n    if (process.env.NODE_ENV === 'development') {\n      setTimeout(() => {\n        this.handleResize();\n      }, 10);\n    } else {\n      this.handleResize();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    if (isEqual(prevProps, this.props)) {\n      return;\n    }\n    this.handleResize();\n  }\n  componentWillUnmount() {\n    this.handleResize.cancel();\n  }\n  render() {\n    var _this$table$current, _this$table$current2, _columnVisibilityData;\n    const {\n      headings,\n      totals,\n      showTotalsInFooter,\n      rows,\n      footerContent,\n      hideScrollIndicator = false,\n      increasedTableDensity = false,\n      hasZebraStripingOnData = false,\n      stickyHeader = false,\n      hasFixedFirstColumn: fixedFirstColumn = false\n    } = this.props;\n    const {\n      condensed,\n      columnVisibilityData,\n      isScrolledFarthestLeft,\n      isScrolledFarthestRight\n    } = this.state;\n    if (fixedFirstColumn && process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn('Deprecation: The `hasFixedFirstColumn` prop on the `DataTable` has been deprecated. Use fixedFirstColumns={n} instead.');\n    }\n    const fixedFirstColumns = this.fixedFirstColumns();\n    const rowCountIsEven = rows.length % 2 === 0;\n    const className = classNames(styles.DataTable, condensed && styles.condensed, totals && styles.ShowTotals, showTotalsInFooter && styles.ShowTotalsInFooter, hasZebraStripingOnData && styles.ZebraStripingOnData, hasZebraStripingOnData && rowCountIsEven && styles.RowCountIsEven);\n    const wrapperClassName = classNames(styles.TableWrapper, condensed && styles.condensed, increasedTableDensity && styles.IncreasedTableDensity, stickyHeader && styles.StickyHeaderEnabled);\n    const headingMarkup = /*#__PURE__*/React.createElement(\"tr\", null, headings.map((heading, index) => this.renderHeading({\n      heading,\n      headingIndex: index,\n      inFixedNthColumn: false,\n      inStickyHeader: false\n    })));\n    const totalsMarkup = totals ? /*#__PURE__*/React.createElement(\"tr\", null, totals.map((total, index) => this.renderTotals({\n      total,\n      index\n    }))) : null;\n    const nthColumns = rows.map(row => row.slice(0, fixedFirstColumns));\n    const nthHeadings = headings.slice(0, fixedFirstColumns);\n    const nthTotals = totals === null || totals === void 0 ? void 0 : totals.slice(0, fixedFirstColumns);\n    const tableHeaderRows = (_this$table$current = this.table.current) === null || _this$table$current === void 0 ? void 0 : _this$table$current.children[0].childNodes;\n    const tableBodyRows = (_this$table$current2 = this.table.current) === null || _this$table$current2 === void 0 ? void 0 : _this$table$current2.children[1].childNodes;\n    const headerRowHeights = getRowClientHeights(tableHeaderRows);\n    const bodyRowHeights = getRowClientHeights(tableBodyRows);\n    const fixedNthColumnMarkup = condensed && fixedFirstColumns !== 0 && /*#__PURE__*/React.createElement(\"table\", {\n      className: classNames(styles.FixedFirstColumn, !isScrolledFarthestLeft && styles.separate),\n      style: {\n        width: `${(_columnVisibilityData = columnVisibilityData[fixedFirstColumns - 1]) === null || _columnVisibilityData === void 0 ? void 0 : _columnVisibilityData.rightEdge}px`\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", {\n      style: {\n        height: `${headerRowHeights[0]}px`\n      }\n    }, nthHeadings.map((heading, index) => this.renderHeading({\n      heading,\n      headingIndex: index,\n      inFixedNthColumn: true,\n      inStickyHeader: false\n    }))), totals && !showTotalsInFooter && /*#__PURE__*/React.createElement(\"tr\", {\n      style: {\n        height: `${headerRowHeights[1]}px`\n      }\n    }, nthTotals === null || nthTotals === void 0 ? void 0 : nthTotals.map((total, index) => this.renderTotals({\n      total,\n      index\n    })))), /*#__PURE__*/React.createElement(\"tbody\", null, nthColumns.map((row, index) => this.defaultRenderRow({\n      row,\n      index,\n      inFixedNthColumn: true,\n      rowHeights: bodyRowHeights\n    }))), totals && showTotalsInFooter && /*#__PURE__*/React.createElement(\"tfoot\", null, /*#__PURE__*/React.createElement(\"tr\", null, nthTotals === null || nthTotals === void 0 ? void 0 : nthTotals.map((total, index) => this.renderTotals({\n      total,\n      index\n    })))));\n    const bodyMarkup = rows.map((row, index) => this.defaultRenderRow({\n      row,\n      index,\n      inFixedNthColumn: false\n    }));\n    const footerMarkup = footerContent ? /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Footer\n    }, footerContent) : null;\n    const headerTotalsMarkup = !showTotalsInFooter ? totalsMarkup : null;\n    const footerTotalsMarkup = showTotalsInFooter ? /*#__PURE__*/React.createElement(\"tfoot\", null, totalsMarkup) : null;\n    const navigationMarkup = location => hideScrollIndicator ? null : /*#__PURE__*/React.createElement(Navigation, {\n      columnVisibilityData: columnVisibilityData,\n      isScrolledFarthestLeft: isScrolledFarthestLeft,\n      isScrolledFarthestRight: isScrolledFarthestRight,\n      navigateTableLeft: this.navigateTable('left'),\n      navigateTableRight: this.navigateTable('right'),\n      fixedFirstColumns: fixedFirstColumns,\n      setRef: ref => {\n        if (location === 'header') {\n          this.headerNav = ref;\n        } else if (location === 'sticky') {\n          this.stickyNav = ref;\n        }\n      }\n    });\n    const stickyHeaderMarkup = stickyHeader ? /*#__PURE__*/React.createElement(AfterInitialMount, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.StickyHeaderWrapper,\n      role: \"presentation\"\n    }, /*#__PURE__*/React.createElement(Sticky, {\n      boundingElement: this.dataTable.current,\n      onStickyChange: isSticky => {\n        this.changeHeadingFocus();\n        this.stickyHeaderActive = isSticky;\n      }\n    }, isSticky => {\n      const stickyHeaderInnerClassNames = classNames(styles.StickyHeaderInner, isSticky && styles['StickyHeaderInner-isSticky']);\n      const stickyHeaderTableClassNames = classNames(styles.StickyHeaderTable, !isScrolledFarthestLeft && styles.separate);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: stickyHeaderInnerClassNames\n      }, /*#__PURE__*/React.createElement(\"div\", null, navigationMarkup('sticky')), /*#__PURE__*/React.createElement(\"table\", {\n        className: stickyHeaderTableClassNames,\n        ref: this.stickyTable\n      }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", {\n        className: styles.StickyTableHeadingsRow\n      }, headings.map((heading, index) => {\n        return this.renderHeading({\n          heading,\n          headingIndex: index,\n          inFixedNthColumn: Boolean(index <= fixedFirstColumns - 1 && fixedFirstColumns),\n          inStickyHeader: true\n        });\n      })))));\n    }))) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: wrapperClassName,\n      ref: this.dataTable\n    }, stickyHeaderMarkup, navigationMarkup('header'), /*#__PURE__*/React.createElement(\"div\", {\n      className: className\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.ScrollContainer,\n      ref: this.scrollContainer\n    }, /*#__PURE__*/React.createElement(EventListener, {\n      event: \"resize\",\n      handler: this.handleResize\n    }), /*#__PURE__*/React.createElement(EventListener, {\n      capture: true,\n      passive: true,\n      event: \"scroll\",\n      handler: this.scrollListener\n    }), fixedNthColumnMarkup, /*#__PURE__*/React.createElement(\"table\", {\n      className: styles.Table,\n      ref: this.table\n    }, /*#__PURE__*/React.createElement(\"thead\", null, headingMarkup, headerTotalsMarkup), /*#__PURE__*/React.createElement(\"tbody\", null, bodyMarkup), footerTotalsMarkup)), footerMarkup));\n  }\n  fixedFirstColumns() {\n    const {\n      hasFixedFirstColumn,\n      fixedFirstColumns = 0,\n      headings\n    } = this.props;\n    const numberOfFixedFirstColumns = hasFixedFirstColumn && !fixedFirstColumns ? 1 : fixedFirstColumns;\n    if (numberOfFixedFirstColumns >= headings.length) {\n      return 0;\n    }\n    return numberOfFixedFirstColumns;\n  }\n}\nfunction DataTable(props) {\n  const i18n = useI18n();\n  return /*#__PURE__*/React.createElement(DataTableInner, Object.assign({}, props, {\n    i18n: i18n\n  }));\n}\nexport { DataTable };","map":{"version":3,"names":["React","PureComponent","createRef","isEqual","debounce","classNames","headerCell","measureColumn","getPrevAndCurrentColumns","styles","Cell","AfterInitialMount","Sticky","Navigation","useI18n","EventListener","getRowClientHeights","rows","heights","forEach","row","push","clientHeight","DataTableInner","constructor","arguments","state","condensed","columnVisibilityData","isScrolledFarthestLeft","isScrolledFarthestRight","rowHovered","undefined","dataTable","scrollContainer","table","stickyTable","stickyNav","headerNav","tableHeadings","stickyHeadings","tableHeadingWidths","stickyHeaderActive","scrollStopTimer","handleResize","current","scrollWidth","clientWidth","setState","calculateColumnVisibilityData","setCellRef","_ref","ref","index","inStickyHeader","button","querySelector","addEventListener","handleHeaderButtonFocus","changeHeadingFocus","stickyFocusedItemIndex","findIndex","item","_document$activeEleme","document","activeElement","parentElement","tableFocusedItemIndex","_document$activeEleme2","arrowsInStickyNav","querySelectorAll","arrowsInHeaderNav","stickyFocusedNavIndex","headerFocusedNavIndex","style","visibility","focus","removeProperty","fixedFirstColumns","stickyHeader","props","headerCells","selector","rightMostHeader","nthColumnWidth","offsetLeft","offsetWidth","length","firstVisibleColumnIndex","tableLeftVisibleEdge","scrollLeft","tableRightVisibleEdge","tableData","map","lastColumn","rightEdge","previousColumn","currentColumn","event","_this$state$columnVis","target","currentCell","parentNode","tableScrollLeft","tableViewableWidth","tableRightEdge","currentColumnLeftEdge","currentColumnRightEdge","stickyHeaderScrolling","scrollListener","_this$scrollContainer","clearTimeout","setTimeout","prevState","handleHover","handleFocus","_this$state$columnVis2","fixedNthColumn","desiredScrollLeft","navigateTable","direction","_this$state$columnVis3","prevWidths","width","handleScroll","newScrollLeft","leftEdge","requestAnimationFrame","renderHeading","_ref2","heading","headingIndex","inFixedNthColumn","sortable","truncate","columnContentTypes","defaultSortDirection","initialSortColumnIndex","verticalAlign","firstColumnMinWidth","sortDirection","sortedColumnIndex","sortableHeadingProps","headingCellId","stickyHeaderId","id","isSortable","isSorted","sorted","onSort","defaultOnSort","stickyCellWidth","fixedCellVisible","cellProps","header","stickyHeadingCell","content","contentType","nthColumn","_this$state$columnVis4","createElement","Object","assign","key","setRef","Boolean","lastFixedFirstColumn","left","totalsRowHeading","i18n","totals","totalsName","totalsLabel","singular","translate","plural","filter","total","renderTotals","_ref3","totalInFooter","showTotalsInFooter","firstColumn","getColSpan","rowLength","headingsLength","contentTypesLength","cellIndex","rowLen","colLen","colSpan","Math","floor","remainder","defaultRenderRow","_ref4","rowHeights","hoverable","headings","className","TableRow","onMouseEnter","onMouseLeave","hovered","height","newSortDirection","handleSort","componentDidMount","process","env","NODE_ENV","componentDidUpdate","prevProps","componentWillUnmount","cancel","render","_this$table$current","_this$table$current2","_columnVisibilityData","footerContent","hideScrollIndicator","increasedTableDensity","hasZebraStripingOnData","hasFixedFirstColumn","fixedFirstColumn","console","warn","rowCountIsEven","DataTable","ShowTotals","ShowTotalsInFooter","ZebraStripingOnData","RowCountIsEven","wrapperClassName","TableWrapper","IncreasedTableDensity","StickyHeaderEnabled","headingMarkup","totalsMarkup","nthColumns","slice","nthHeadings","nthTotals","tableHeaderRows","children","childNodes","tableBodyRows","headerRowHeights","bodyRowHeights","fixedNthColumnMarkup","FixedFirstColumn","separate","bodyMarkup","footerMarkup","Footer","headerTotalsMarkup","footerTotalsMarkup","navigationMarkup","location","navigateTableLeft","navigateTableRight","stickyHeaderMarkup","StickyHeaderWrapper","role","boundingElement","onStickyChange","isSticky","stickyHeaderInnerClassNames","StickyHeaderInner","stickyHeaderTableClassNames","StickyHeaderTable","StickyTableHeadingsRow","ScrollContainer","handler","capture","passive","Table","numberOfFixedFirstColumns"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/DataTable/DataTable.js"],"sourcesContent":["import React, { PureComponent, createRef } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { debounce } from '../../utilities/debounce.js';\nimport { classNames } from '../../utilities/css.js';\nimport { headerCell } from '../shared.js';\nimport { measureColumn, getPrevAndCurrentColumns } from './utilities.js';\nimport styles from './DataTable.scss.js';\nimport { Cell } from './components/Cell/Cell.js';\nimport { AfterInitialMount } from '../AfterInitialMount/AfterInitialMount.js';\nimport { Sticky } from '../Sticky/Sticky.js';\nimport { Navigation } from './components/Navigation/Navigation.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\nimport { EventListener } from '../EventListener/EventListener.js';\n\nconst getRowClientHeights = rows => {\n  const heights = [];\n\n  if (!rows) {\n    return heights;\n  }\n\n  rows.forEach(row => {\n    heights.push(row.clientHeight);\n  });\n  return heights;\n};\n\nclass DataTableInner extends PureComponent {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      condensed: false,\n      columnVisibilityData: [],\n      isScrolledFarthestLeft: true,\n      isScrolledFarthestRight: false,\n      rowHovered: undefined\n    };\n    this.dataTable = /*#__PURE__*/createRef();\n    this.scrollContainer = /*#__PURE__*/createRef();\n    this.table = /*#__PURE__*/createRef();\n    this.stickyTable = /*#__PURE__*/createRef();\n    this.stickyNav = null;\n    this.headerNav = null;\n    this.tableHeadings = [];\n    this.stickyHeadings = [];\n    this.tableHeadingWidths = [];\n    this.stickyHeaderActive = false;\n    this.scrollStopTimer = null;\n    this.handleResize = debounce(() => {\n      const {\n        table: {\n          current: table\n        },\n        scrollContainer: {\n          current: scrollContainer\n        }\n      } = this;\n      let condensed = false;\n\n      if (table && scrollContainer) {\n        // safari sometimes incorrectly sets the scrollwidth too large by 1px\n        condensed = table.scrollWidth > scrollContainer.clientWidth + 1;\n      }\n\n      this.setState({\n        condensed,\n        ...this.calculateColumnVisibilityData(condensed)\n      });\n    });\n\n    this.setCellRef = ({\n      ref,\n      index,\n      inStickyHeader\n    }) => {\n      if (ref == null) {\n        return;\n      }\n\n      if (inStickyHeader) {\n        this.stickyHeadings[index] = ref;\n        const button = ref.querySelector('button');\n\n        if (button == null) {\n          return;\n        }\n\n        button.addEventListener('focus', this.handleHeaderButtonFocus);\n      } else {\n        this.tableHeadings[index] = ref;\n        this.tableHeadingWidths[index] = ref.clientWidth;\n      }\n    };\n\n    this.changeHeadingFocus = () => {\n      const {\n        tableHeadings,\n        stickyHeadings,\n        stickyNav,\n        headerNav\n      } = this;\n      const stickyFocusedItemIndex = stickyHeadings.findIndex(item => {\n        var _document$activeEleme;\n\n        return item === ((_document$activeEleme = document.activeElement) === null || _document$activeEleme === void 0 ? void 0 : _document$activeEleme.parentElement);\n      });\n      const tableFocusedItemIndex = tableHeadings.findIndex(item => {\n        var _document$activeEleme2;\n\n        return item === ((_document$activeEleme2 = document.activeElement) === null || _document$activeEleme2 === void 0 ? void 0 : _document$activeEleme2.parentElement);\n      });\n      const arrowsInStickyNav = stickyNav === null || stickyNav === void 0 ? void 0 : stickyNav.querySelectorAll('button');\n      const arrowsInHeaderNav = headerNav === null || headerNav === void 0 ? void 0 : headerNav.querySelectorAll('button');\n      let stickyFocusedNavIndex = -1;\n      arrowsInStickyNav === null || arrowsInStickyNav === void 0 ? void 0 : arrowsInStickyNav.forEach((item, index) => {\n        if (item === document.activeElement) {\n          stickyFocusedNavIndex = index;\n        }\n      });\n      let headerFocusedNavIndex = -1;\n      arrowsInHeaderNav === null || arrowsInHeaderNav === void 0 ? void 0 : arrowsInHeaderNav.forEach((item, index) => {\n        if (item === document.activeElement) {\n          headerFocusedNavIndex = index;\n        }\n      });\n\n      if (stickyFocusedItemIndex < 0 && tableFocusedItemIndex < 0 && stickyFocusedNavIndex < 0 && headerFocusedNavIndex < 0) {\n        return null;\n      }\n\n      let button;\n\n      if (stickyFocusedItemIndex >= 0) {\n        button = tableHeadings[stickyFocusedItemIndex].querySelector('button');\n      } else if (tableFocusedItemIndex >= 0) {\n        button = stickyHeadings[tableFocusedItemIndex].querySelector('button');\n      }\n\n      if (stickyFocusedNavIndex >= 0) {\n        button = arrowsInHeaderNav === null || arrowsInHeaderNav === void 0 ? void 0 : arrowsInHeaderNav[stickyFocusedNavIndex];\n      } else if (headerFocusedNavIndex >= 0) {\n        button = arrowsInStickyNav === null || arrowsInStickyNav === void 0 ? void 0 : arrowsInStickyNav[headerFocusedNavIndex];\n      }\n\n      if (button == null) {\n        return null;\n      }\n\n      button.style.visibility = 'visible';\n      button.focus();\n      button.style.removeProperty('visibility');\n    };\n\n    this.calculateColumnVisibilityData = condensed => {\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const {\n        table: {\n          current: table\n        },\n        scrollContainer: {\n          current: scrollContainer\n        },\n        dataTable: {\n          current: dataTable\n        }\n      } = this;\n      const {\n        stickyHeader\n      } = this.props;\n\n      if ((stickyHeader || condensed) && table && scrollContainer && dataTable) {\n        const headerCells = table.querySelectorAll(headerCell.selector);\n        const rightMostHeader = headerCells[fixedFirstColumns - 1];\n        const nthColumnWidth = fixedFirstColumns ? rightMostHeader.offsetLeft + rightMostHeader.offsetWidth : 0;\n\n        if (headerCells.length > 0) {\n          const firstVisibleColumnIndex = headerCells.length - 1;\n          const tableLeftVisibleEdge = scrollContainer.scrollLeft + nthColumnWidth;\n          const tableRightVisibleEdge = scrollContainer.scrollLeft + dataTable.offsetWidth;\n          const tableData = {\n            firstVisibleColumnIndex,\n            tableLeftVisibleEdge,\n            tableRightVisibleEdge\n          };\n          const columnVisibilityData = [...headerCells].map(measureColumn(tableData));\n          const lastColumn = columnVisibilityData[columnVisibilityData.length - 1];\n          const isScrolledFarthestLeft = fixedFirstColumns ? tableLeftVisibleEdge === nthColumnWidth : tableLeftVisibleEdge === 0;\n          return {\n            columnVisibilityData,\n            ...getPrevAndCurrentColumns(tableData, columnVisibilityData),\n            isScrolledFarthestLeft,\n            isScrolledFarthestRight: lastColumn.rightEdge <= tableRightVisibleEdge\n          };\n        }\n      }\n\n      return {\n        columnVisibilityData: [],\n        previousColumn: undefined,\n        currentColumn: undefined\n      };\n    };\n\n    this.handleHeaderButtonFocus = event => {\n      var _this$state$columnVis;\n\n      const fixedFirstColumns = this.fixedFirstColumns();\n\n      if (this.scrollContainer.current == null || event.target == null || this.state.columnVisibilityData.length === 0) {\n        return;\n      }\n\n      const target = event.target;\n      const currentCell = target.parentNode;\n      const tableScrollLeft = this.scrollContainer.current.scrollLeft;\n      const tableViewableWidth = this.scrollContainer.current.offsetWidth;\n      const tableRightEdge = tableScrollLeft + tableViewableWidth;\n      const nthColumnWidth = this.state.columnVisibilityData.length > 0 ? (_this$state$columnVis = this.state.columnVisibilityData[fixedFirstColumns]) === null || _this$state$columnVis === void 0 ? void 0 : _this$state$columnVis.rightEdge : 0;\n      const currentColumnLeftEdge = currentCell.offsetLeft;\n      const currentColumnRightEdge = currentCell.offsetLeft + currentCell.offsetWidth;\n\n      if (tableScrollLeft > currentColumnLeftEdge - nthColumnWidth) {\n        this.scrollContainer.current.scrollLeft = currentColumnLeftEdge - nthColumnWidth;\n      }\n\n      if (currentColumnRightEdge > tableRightEdge) {\n        this.scrollContainer.current.scrollLeft = currentColumnRightEdge - tableViewableWidth;\n      }\n    };\n\n    this.stickyHeaderScrolling = () => {\n      const {\n        current: stickyTable\n      } = this.stickyTable;\n      const {\n        current: scrollContainer\n      } = this.scrollContainer;\n\n      if (stickyTable == null || scrollContainer == null) {\n        return;\n      }\n\n      stickyTable.scrollLeft = scrollContainer.scrollLeft;\n    };\n\n    this.scrollListener = () => {\n      var _this$scrollContainer;\n\n      if (this.scrollStopTimer) {\n        clearTimeout(this.scrollStopTimer);\n      }\n\n      this.scrollStopTimer = setTimeout(() => {\n        this.setState(prevState => ({ ...this.calculateColumnVisibilityData(prevState.condensed)\n        }));\n      }, 100);\n      this.setState({\n        isScrolledFarthestLeft: ((_this$scrollContainer = this.scrollContainer.current) === null || _this$scrollContainer === void 0 ? void 0 : _this$scrollContainer.scrollLeft) === 0\n      });\n\n      if (this.props.stickyHeader && this.stickyHeaderActive) {\n        this.stickyHeaderScrolling();\n      }\n    };\n\n    this.handleHover = row => () => {\n      this.setState({\n        rowHovered: row\n      });\n    };\n\n    this.handleFocus = event => {\n      var _this$state$columnVis2;\n\n      const fixedFirstColumns = this.fixedFirstColumns();\n\n      if (this.scrollContainer.current == null || event.target == null) {\n        return;\n      }\n\n      const currentCell = event.target.parentNode;\n      const fixedNthColumn = this.props;\n      const nthColumnWidth = fixedNthColumn ? (_this$state$columnVis2 = this.state.columnVisibilityData[fixedFirstColumns]) === null || _this$state$columnVis2 === void 0 ? void 0 : _this$state$columnVis2.rightEdge : 0;\n      const currentColumnLeftEdge = currentCell.offsetLeft;\n      const desiredScrollLeft = currentColumnLeftEdge - nthColumnWidth;\n\n      if (this.scrollContainer.current.scrollLeft > desiredScrollLeft) {\n        this.scrollContainer.current.scrollLeft = desiredScrollLeft;\n      } // focus fixed first column if present\n\n    };\n\n    this.navigateTable = direction => {\n      var _this$state$columnVis3;\n\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const {\n        currentColumn,\n        previousColumn\n      } = this.state;\n      const nthColumnWidth = (_this$state$columnVis3 = this.state.columnVisibilityData[fixedFirstColumns - 1]) === null || _this$state$columnVis3 === void 0 ? void 0 : _this$state$columnVis3.rightEdge;\n\n      if (!currentColumn || !previousColumn) {\n        return;\n      }\n\n      let prevWidths = 0;\n\n      for (let index = 0; index < currentColumn.index; index++) {\n        prevWidths += this.state.columnVisibilityData[index].width;\n      }\n\n      const {\n        current: scrollContainer\n      } = this.scrollContainer;\n\n      const handleScroll = () => {\n        let newScrollLeft = 0;\n\n        if (fixedFirstColumns) {\n          newScrollLeft = direction === 'right' ? prevWidths - nthColumnWidth + currentColumn.width : prevWidths - previousColumn.width - nthColumnWidth;\n        } else {\n          newScrollLeft = direction === 'right' ? currentColumn.rightEdge : previousColumn.leftEdge;\n        }\n\n        if (scrollContainer) {\n          scrollContainer.scrollLeft = newScrollLeft;\n          requestAnimationFrame(() => {\n            this.setState(prevState => ({ ...this.calculateColumnVisibilityData(prevState.condensed)\n            }));\n          });\n        }\n      };\n\n      return handleScroll;\n    };\n\n    this.renderHeading = ({\n      heading,\n      headingIndex,\n      inFixedNthColumn,\n      inStickyHeader\n    }) => {\n      const {\n        sortable,\n        truncate = false,\n        columnContentTypes,\n        defaultSortDirection,\n        initialSortColumnIndex = 0,\n        verticalAlign,\n        firstColumnMinWidth\n      } = this.props;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const {\n        sortDirection = defaultSortDirection,\n        sortedColumnIndex = initialSortColumnIndex,\n        isScrolledFarthestLeft\n      } = this.state;\n      let sortableHeadingProps;\n      const headingCellId = `heading-cell-${headingIndex}`;\n      const stickyHeaderId = `stickyheader-${headingIndex}`;\n      const id = inStickyHeader ? stickyHeaderId : headingCellId;\n\n      if (sortable) {\n        const isSortable = sortable[headingIndex];\n        const isSorted = isSortable && sortedColumnIndex === headingIndex;\n        const direction = isSorted ? sortDirection : 'none';\n        sortableHeadingProps = {\n          defaultSortDirection,\n          sorted: isSorted,\n          sortable: isSortable,\n          sortDirection: direction,\n          onSort: this.defaultOnSort(headingIndex),\n          fixedNthColumn: fixedFirstColumns,\n          inFixedNthColumn: fixedFirstColumns\n        };\n      }\n\n      const stickyCellWidth = inStickyHeader ? this.tableHeadingWidths[headingIndex] : undefined;\n      const fixedCellVisible = !isScrolledFarthestLeft;\n      const cellProps = {\n        header: true,\n        stickyHeadingCell: inStickyHeader,\n        content: heading,\n        contentType: columnContentTypes[headingIndex],\n        nthColumn: headingIndex < fixedFirstColumns,\n        fixedFirstColumns,\n        truncate,\n        headingIndex,\n        ...sortableHeadingProps,\n        verticalAlign,\n        handleFocus: this.handleFocus,\n        stickyCellWidth,\n        fixedCellVisible,\n        firstColumnMinWidth\n      };\n\n      if (inFixedNthColumn && inStickyHeader) {\n        var _this$state$columnVis4;\n\n        // need two cells for fixed first column (actual cell and the overlapping one)\n        // the sticky cell is second so that the index is associated with the sticky\n        // cell and not the underlying one. This helps `changeHeadingFocus` to put\n        // focus on the right cell when switching from sticky to non-sticky headers\n        return [/*#__PURE__*/React.createElement(Cell, Object.assign({\n          key: id\n        }, cellProps, {\n          setRef: ref => {\n            this.setCellRef({\n              ref,\n              index: headingIndex,\n              inStickyHeader\n            });\n          },\n          inFixedNthColumn: false\n        })), /*#__PURE__*/React.createElement(Cell, Object.assign({\n          key: `${id}-sticky`\n        }, cellProps, {\n          setRef: ref => {\n            this.setCellRef({\n              ref,\n              index: headingIndex,\n              inStickyHeader\n            });\n          },\n          inFixedNthColumn: Boolean(fixedFirstColumns),\n          lastFixedFirstColumn: headingIndex === fixedFirstColumns - 1,\n          style: {\n            left: (_this$state$columnVis4 = this.state.columnVisibilityData[headingIndex]) === null || _this$state$columnVis4 === void 0 ? void 0 : _this$state$columnVis4.leftEdge\n          }\n        }))];\n      }\n\n      return /*#__PURE__*/React.createElement(Cell, Object.assign({\n        key: id\n      }, cellProps, {\n        setRef: ref => {\n          this.setCellRef({\n            ref,\n            index: headingIndex,\n            inStickyHeader\n          });\n        },\n        lastFixedFirstColumn: headingIndex === fixedFirstColumns - 1,\n        inFixedNthColumn: inFixedNthColumn\n      }));\n    };\n\n    this.totalsRowHeading = () => {\n      const {\n        i18n,\n        totals,\n        totalsName\n      } = this.props;\n      const totalsLabel = totalsName ? totalsName : {\n        singular: i18n.translate('Polaris.DataTable.totalRowHeading'),\n        plural: i18n.translate('Polaris.DataTable.totalsRowHeading')\n      };\n      return totals && totals.filter(total => total !== '').length > 1 ? totalsLabel.plural : totalsLabel.singular;\n    };\n\n    this.renderTotals = ({\n      total,\n      index\n    }) => {\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const id = `totals-cell-${index}`;\n      const {\n        truncate = false,\n        verticalAlign,\n        columnContentTypes\n      } = this.props;\n      let content;\n      let contentType;\n\n      if (index === 0) {\n        content = this.totalsRowHeading();\n      }\n\n      if (total !== '' && index > 0) {\n        contentType = columnContentTypes[index];\n        content = total;\n      }\n\n      const totalInFooter = this.props.showTotalsInFooter;\n      return /*#__PURE__*/React.createElement(Cell, {\n        total: true,\n        totalInFooter: totalInFooter,\n        nthColumn: index <= fixedFirstColumns - 1,\n        firstColumn: index === 0,\n        key: id,\n        content: content,\n        contentType: contentType,\n        truncate: truncate,\n        verticalAlign: verticalAlign\n      });\n    };\n\n    this.getColSpan = (rowLength, headingsLength, contentTypesLength, cellIndex) => {\n      // We decided that it shouldn't be possible to have fixed \"n\" columns and content that spans multiple columns\n      const fixedFirstColumns = this.fixedFirstColumns();\n\n      if (fixedFirstColumns) {\n        return 1;\n      }\n\n      const rowLen = rowLength ? rowLength : 1;\n      const colLen = headingsLength ? headingsLength : contentTypesLength;\n      const colSpan = Math.floor(colLen / rowLen);\n      const remainder = colLen % rowLen;\n      return cellIndex === 0 ? colSpan + remainder : colSpan;\n    };\n\n    this.defaultRenderRow = ({\n      row,\n      index,\n      inFixedNthColumn,\n      rowHeights\n    }) => {\n      const {\n        columnContentTypes,\n        truncate = false,\n        verticalAlign,\n        hoverable = true,\n        headings\n      } = this.props;\n      const {\n        condensed\n      } = this.state;\n      const fixedFirstColumns = this.fixedFirstColumns();\n      const className = classNames(styles.TableRow, hoverable && styles.hoverable);\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: `row-${index}`,\n        className: className,\n        onMouseEnter: this.handleHover(index),\n        onMouseLeave: this.handleHover()\n      }, row.map((content, cellIndex) => {\n        const hovered = index === this.state.rowHovered;\n        const id = `cell-${cellIndex}-row-${index}`;\n        const colSpan = this.getColSpan(row.length, headings.length, columnContentTypes.length, cellIndex);\n        return /*#__PURE__*/React.createElement(Cell, {\n          key: id,\n          content: content,\n          contentType: columnContentTypes[cellIndex],\n          nthColumn: cellIndex <= fixedFirstColumns - 1,\n          firstColumn: cellIndex === 0,\n          truncate: truncate,\n          verticalAlign: verticalAlign,\n          colSpan: colSpan,\n          hovered: hovered,\n          style: rowHeights ? {\n            height: `${rowHeights[index]}px`\n          } : {},\n          inFixedNthColumn: condensed && inFixedNthColumn\n        });\n      }));\n    };\n\n    this.defaultOnSort = headingIndex => {\n      const {\n        onSort,\n        defaultSortDirection = 'ascending',\n        initialSortColumnIndex\n      } = this.props;\n      const {\n        sortDirection = defaultSortDirection,\n        sortedColumnIndex = initialSortColumnIndex\n      } = this.state;\n      let newSortDirection = defaultSortDirection;\n\n      if (sortedColumnIndex === headingIndex) {\n        newSortDirection = sortDirection === 'ascending' ? 'descending' : 'ascending';\n      }\n\n      const handleSort = () => {\n        this.setState({\n          sortDirection: newSortDirection,\n          sortedColumnIndex: headingIndex\n        }, () => {\n          if (onSort) {\n            onSort(headingIndex, newSortDirection);\n          }\n        });\n      };\n\n      return handleSort;\n    };\n  }\n\n  componentDidMount() {\n    // We need to defer the calculation in development so the styles have time to be injected.\n    if (process.env.NODE_ENV === 'development') {\n      setTimeout(() => {\n        this.handleResize();\n      }, 10);\n    } else {\n      this.handleResize();\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (isEqual(prevProps, this.props)) {\n      return;\n    }\n\n    this.handleResize();\n  }\n\n  componentWillUnmount() {\n    this.handleResize.cancel();\n  }\n\n  render() {\n    var _this$table$current, _this$table$current2, _columnVisibilityData;\n\n    const {\n      headings,\n      totals,\n      showTotalsInFooter,\n      rows,\n      footerContent,\n      hideScrollIndicator = false,\n      increasedTableDensity = false,\n      hasZebraStripingOnData = false,\n      stickyHeader = false,\n      hasFixedFirstColumn: fixedFirstColumn = false\n    } = this.props;\n    const {\n      condensed,\n      columnVisibilityData,\n      isScrolledFarthestLeft,\n      isScrolledFarthestRight\n    } = this.state;\n\n    if (fixedFirstColumn && process.env.NODE_ENV === 'development') {\n      // eslint-disable-next-line no-console\n      console.warn('Deprecation: The `hasFixedFirstColumn` prop on the `DataTable` has been deprecated. Use fixedFirstColumns={n} instead.');\n    }\n\n    const fixedFirstColumns = this.fixedFirstColumns();\n    const rowCountIsEven = rows.length % 2 === 0;\n    const className = classNames(styles.DataTable, condensed && styles.condensed, totals && styles.ShowTotals, showTotalsInFooter && styles.ShowTotalsInFooter, hasZebraStripingOnData && styles.ZebraStripingOnData, hasZebraStripingOnData && rowCountIsEven && styles.RowCountIsEven);\n    const wrapperClassName = classNames(styles.TableWrapper, condensed && styles.condensed, increasedTableDensity && styles.IncreasedTableDensity, stickyHeader && styles.StickyHeaderEnabled);\n    const headingMarkup = /*#__PURE__*/React.createElement(\"tr\", null, headings.map((heading, index) => this.renderHeading({\n      heading,\n      headingIndex: index,\n      inFixedNthColumn: false,\n      inStickyHeader: false\n    })));\n    const totalsMarkup = totals ? /*#__PURE__*/React.createElement(\"tr\", null, totals.map((total, index) => this.renderTotals({\n      total,\n      index\n    }))) : null;\n    const nthColumns = rows.map(row => row.slice(0, fixedFirstColumns));\n    const nthHeadings = headings.slice(0, fixedFirstColumns);\n    const nthTotals = totals === null || totals === void 0 ? void 0 : totals.slice(0, fixedFirstColumns);\n    const tableHeaderRows = (_this$table$current = this.table.current) === null || _this$table$current === void 0 ? void 0 : _this$table$current.children[0].childNodes;\n    const tableBodyRows = (_this$table$current2 = this.table.current) === null || _this$table$current2 === void 0 ? void 0 : _this$table$current2.children[1].childNodes;\n    const headerRowHeights = getRowClientHeights(tableHeaderRows);\n    const bodyRowHeights = getRowClientHeights(tableBodyRows);\n    const fixedNthColumnMarkup = condensed && fixedFirstColumns !== 0 && /*#__PURE__*/React.createElement(\"table\", {\n      className: classNames(styles.FixedFirstColumn, !isScrolledFarthestLeft && styles.separate),\n      style: {\n        width: `${(_columnVisibilityData = columnVisibilityData[fixedFirstColumns - 1]) === null || _columnVisibilityData === void 0 ? void 0 : _columnVisibilityData.rightEdge}px`\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", {\n      style: {\n        height: `${headerRowHeights[0]}px`\n      }\n    }, nthHeadings.map((heading, index) => this.renderHeading({\n      heading,\n      headingIndex: index,\n      inFixedNthColumn: true,\n      inStickyHeader: false\n    }))), totals && !showTotalsInFooter && /*#__PURE__*/React.createElement(\"tr\", {\n      style: {\n        height: `${headerRowHeights[1]}px`\n      }\n    }, nthTotals === null || nthTotals === void 0 ? void 0 : nthTotals.map((total, index) => this.renderTotals({\n      total,\n      index\n    })))), /*#__PURE__*/React.createElement(\"tbody\", null, nthColumns.map((row, index) => this.defaultRenderRow({\n      row,\n      index,\n      inFixedNthColumn: true,\n      rowHeights: bodyRowHeights\n    }))), totals && showTotalsInFooter && /*#__PURE__*/React.createElement(\"tfoot\", null, /*#__PURE__*/React.createElement(\"tr\", null, nthTotals === null || nthTotals === void 0 ? void 0 : nthTotals.map((total, index) => this.renderTotals({\n      total,\n      index\n    })))));\n    const bodyMarkup = rows.map((row, index) => this.defaultRenderRow({\n      row,\n      index,\n      inFixedNthColumn: false\n    }));\n    const footerMarkup = footerContent ? /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.Footer\n    }, footerContent) : null;\n    const headerTotalsMarkup = !showTotalsInFooter ? totalsMarkup : null;\n    const footerTotalsMarkup = showTotalsInFooter ? /*#__PURE__*/React.createElement(\"tfoot\", null, totalsMarkup) : null;\n\n    const navigationMarkup = location => hideScrollIndicator ? null : /*#__PURE__*/React.createElement(Navigation, {\n      columnVisibilityData: columnVisibilityData,\n      isScrolledFarthestLeft: isScrolledFarthestLeft,\n      isScrolledFarthestRight: isScrolledFarthestRight,\n      navigateTableLeft: this.navigateTable('left'),\n      navigateTableRight: this.navigateTable('right'),\n      fixedFirstColumns: fixedFirstColumns,\n      setRef: ref => {\n        if (location === 'header') {\n          this.headerNav = ref;\n        } else if (location === 'sticky') {\n          this.stickyNav = ref;\n        }\n      }\n    });\n\n    const stickyHeaderMarkup = stickyHeader ? /*#__PURE__*/React.createElement(AfterInitialMount, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.StickyHeaderWrapper,\n      role: \"presentation\"\n    }, /*#__PURE__*/React.createElement(Sticky, {\n      boundingElement: this.dataTable.current,\n      onStickyChange: isSticky => {\n        this.changeHeadingFocus();\n        this.stickyHeaderActive = isSticky;\n      }\n    }, isSticky => {\n      const stickyHeaderInnerClassNames = classNames(styles.StickyHeaderInner, isSticky && styles['StickyHeaderInner-isSticky']);\n      const stickyHeaderTableClassNames = classNames(styles.StickyHeaderTable, !isScrolledFarthestLeft && styles.separate);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: stickyHeaderInnerClassNames\n      }, /*#__PURE__*/React.createElement(\"div\", null, navigationMarkup('sticky')), /*#__PURE__*/React.createElement(\"table\", {\n        className: stickyHeaderTableClassNames,\n        ref: this.stickyTable\n      }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", {\n        className: styles.StickyTableHeadingsRow\n      }, headings.map((heading, index) => {\n        return this.renderHeading({\n          heading,\n          headingIndex: index,\n          inFixedNthColumn: Boolean(index <= fixedFirstColumns - 1 && fixedFirstColumns),\n          inStickyHeader: true\n        });\n      })))));\n    }))) : null;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: wrapperClassName,\n      ref: this.dataTable\n    }, stickyHeaderMarkup, navigationMarkup('header'), /*#__PURE__*/React.createElement(\"div\", {\n      className: className\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.ScrollContainer,\n      ref: this.scrollContainer\n    }, /*#__PURE__*/React.createElement(EventListener, {\n      event: \"resize\",\n      handler: this.handleResize\n    }), /*#__PURE__*/React.createElement(EventListener, {\n      capture: true,\n      passive: true,\n      event: \"scroll\",\n      handler: this.scrollListener\n    }), fixedNthColumnMarkup, /*#__PURE__*/React.createElement(\"table\", {\n      className: styles.Table,\n      ref: this.table\n    }, /*#__PURE__*/React.createElement(\"thead\", null, headingMarkup, headerTotalsMarkup), /*#__PURE__*/React.createElement(\"tbody\", null, bodyMarkup), footerTotalsMarkup)), footerMarkup));\n  }\n\n  fixedFirstColumns() {\n    const {\n      hasFixedFirstColumn,\n      fixedFirstColumns = 0,\n      headings\n    } = this.props;\n    const numberOfFixedFirstColumns = hasFixedFirstColumn && !fixedFirstColumns ? 1 : fixedFirstColumns;\n\n    if (numberOfFixedFirstColumns >= headings.length) {\n      return 0;\n    }\n\n    return numberOfFixedFirstColumns;\n  }\n\n}\n\nfunction DataTable(props) {\n  const i18n = useI18n();\n  return /*#__PURE__*/React.createElement(DataTableInner, Object.assign({}, props, {\n    i18n: i18n\n  }));\n}\n\nexport { DataTable };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}