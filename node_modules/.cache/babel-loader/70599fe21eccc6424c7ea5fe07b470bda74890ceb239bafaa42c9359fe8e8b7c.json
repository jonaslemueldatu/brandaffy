{"ast":null,"code":"import React, { useCallback, useMemo } from 'react';\nimport { isSection } from '../../utilities/options.js';\nimport styles from './Autocomplete.scss.js';\nimport { MappedOption } from './components/MappedOption/MappedOption.js';\nimport { Listbox, AutoSelection } from '../Listbox/Listbox.js';\nimport { Combobox } from '../Combobox/Combobox.js';\nimport { MappedAction } from './components/MappedAction/MappedAction.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\n\n// TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\nconst Autocomplete = function Autocomplete(_ref) {\n  let {\n    options,\n    selected,\n    textField,\n    preferredPosition,\n    listTitle,\n    allowMultiple,\n    loading,\n    actionBefore,\n    willLoadMoreResults,\n    emptyState,\n    onSelect,\n    onLoadMoreResults\n  } = _ref;\n  const i18n = useI18n();\n  const buildMappedOptionFromOption = useCallback(options => {\n    return options.map(option => /*#__PURE__*/React.createElement(MappedOption, Object.assign({\n      key: option.id || option.value\n    }, option, {\n      selected: selected.includes(option.value),\n      singleSelection: !allowMultiple\n    })));\n  }, [selected, allowMultiple]);\n  const optionsMarkup = useMemo(() => {\n    const conditionalOptions = loading && !willLoadMoreResults ? [] : options;\n    if (isSection(conditionalOptions)) {\n      const noOptionsAvailable = conditionalOptions.every(_ref2 => {\n        let {\n          options\n        } = _ref2;\n        return options.length === 0;\n      });\n      if (noOptionsAvailable) {\n        return null;\n      }\n      const optionsMarkup = conditionalOptions.map(_ref3 => {\n        let {\n          options,\n          title\n        } = _ref3;\n        if (options.length === 0) {\n          return null;\n        }\n        const optionMarkup = buildMappedOptionFromOption(options);\n        return /*#__PURE__*/React.createElement(Listbox.Section, {\n          divider: false,\n          title: /*#__PURE__*/React.createElement(Listbox.Header, null, title),\n          key: title\n        }, optionMarkup);\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.SectionWrapper\n      }, optionsMarkup);\n    }\n    const optionList = conditionalOptions.length > 0 ? buildMappedOptionFromOption(conditionalOptions) : null;\n    if (listTitle) {\n      return /*#__PURE__*/React.createElement(Listbox.Section, {\n        divider: false,\n        title: /*#__PURE__*/React.createElement(Listbox.Header, null, listTitle)\n      }, optionList);\n    }\n    return optionList;\n  }, [listTitle, loading, options, willLoadMoreResults, buildMappedOptionFromOption]);\n  const loadingMarkup = loading ? /*#__PURE__*/React.createElement(Listbox.Loading, {\n    accessibilityLabel: i18n.translate('Polaris.Autocomplete.spinnerAccessibilityLabel')\n  }) : null;\n  const updateSelection = useCallback(newSelection => {\n    if (actionBefore && newSelection === actionBefore.content) {\n      actionBefore.onAction && actionBefore.onAction();\n      return;\n    }\n    if (allowMultiple) {\n      if (selected.includes(newSelection)) {\n        onSelect(selected.filter(option => option !== newSelection));\n      } else {\n        onSelect([...selected, newSelection]);\n      }\n    } else {\n      onSelect([newSelection]);\n    }\n  }, [allowMultiple, onSelect, selected, actionBefore]);\n  const actionMarkup = actionBefore && /*#__PURE__*/React.createElement(MappedAction, actionBefore);\n  const emptyStateMarkup = emptyState && options.length < 1 && !loading && /*#__PURE__*/React.createElement(\"div\", {\n    role: \"status\"\n  }, emptyState);\n  const autoSelection = actionBefore ? AutoSelection.First : undefined;\n  return /*#__PURE__*/React.createElement(Combobox, {\n    activator: textField,\n    allowMultiple: allowMultiple,\n    onScrolledToBottom: onLoadMoreResults,\n    preferredPosition: preferredPosition,\n    willLoadMoreOptions: willLoadMoreResults\n  }, actionMarkup || optionsMarkup || loadingMarkup || emptyStateMarkup ? /*#__PURE__*/React.createElement(Listbox, {\n    autoSelection: autoSelection,\n    onSelect: updateSelection\n  }, actionMarkup, optionsMarkup && (!loading || willLoadMoreResults) ? optionsMarkup : null, loadingMarkup, emptyStateMarkup) : null);\n};\nAutocomplete.TextField = Combobox.TextField;\nexport { Autocomplete };","map":{"version":3,"names":["React","useCallback","useMemo","isSection","styles","MappedOption","Listbox","AutoSelection","Combobox","MappedAction","useI18n","Autocomplete","_ref","options","selected","textField","preferredPosition","listTitle","allowMultiple","loading","actionBefore","willLoadMoreResults","emptyState","onSelect","onLoadMoreResults","i18n","buildMappedOptionFromOption","map","option","createElement","Object","assign","key","id","value","includes","singleSelection","optionsMarkup","conditionalOptions","noOptionsAvailable","every","_ref2","length","_ref3","title","optionMarkup","Section","divider","Header","className","SectionWrapper","optionList","loadingMarkup","Loading","accessibilityLabel","translate","updateSelection","newSelection","content","onAction","filter","actionMarkup","emptyStateMarkup","role","autoSelection","First","undefined","activator","onScrolledToBottom","willLoadMoreOptions","TextField"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/Autocomplete/Autocomplete.js"],"sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport { isSection } from '../../utilities/options.js';\nimport styles from './Autocomplete.scss.js';\nimport { MappedOption } from './components/MappedOption/MappedOption.js';\nimport { Listbox, AutoSelection } from '../Listbox/Listbox.js';\nimport { Combobox } from '../Combobox/Combobox.js';\nimport { MappedAction } from './components/MappedAction/MappedAction.js';\nimport { useI18n } from '../../utilities/i18n/hooks.js';\n\n// TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\nconst Autocomplete = function Autocomplete({\n  options,\n  selected,\n  textField,\n  preferredPosition,\n  listTitle,\n  allowMultiple,\n  loading,\n  actionBefore,\n  willLoadMoreResults,\n  emptyState,\n  onSelect,\n  onLoadMoreResults\n}) {\n  const i18n = useI18n();\n  const buildMappedOptionFromOption = useCallback(options => {\n    return options.map(option => /*#__PURE__*/React.createElement(MappedOption, Object.assign({\n      key: option.id || option.value\n    }, option, {\n      selected: selected.includes(option.value),\n      singleSelection: !allowMultiple\n    })));\n  }, [selected, allowMultiple]);\n  const optionsMarkup = useMemo(() => {\n    const conditionalOptions = loading && !willLoadMoreResults ? [] : options;\n\n    if (isSection(conditionalOptions)) {\n      const noOptionsAvailable = conditionalOptions.every(({\n        options\n      }) => options.length === 0);\n\n      if (noOptionsAvailable) {\n        return null;\n      }\n\n      const optionsMarkup = conditionalOptions.map(({\n        options,\n        title\n      }) => {\n        if (options.length === 0) {\n          return null;\n        }\n\n        const optionMarkup = buildMappedOptionFromOption(options);\n        return /*#__PURE__*/React.createElement(Listbox.Section, {\n          divider: false,\n          title: /*#__PURE__*/React.createElement(Listbox.Header, null, title),\n          key: title\n        }, optionMarkup);\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: styles.SectionWrapper\n      }, optionsMarkup);\n    }\n\n    const optionList = conditionalOptions.length > 0 ? buildMappedOptionFromOption(conditionalOptions) : null;\n\n    if (listTitle) {\n      return /*#__PURE__*/React.createElement(Listbox.Section, {\n        divider: false,\n        title: /*#__PURE__*/React.createElement(Listbox.Header, null, listTitle)\n      }, optionList);\n    }\n\n    return optionList;\n  }, [listTitle, loading, options, willLoadMoreResults, buildMappedOptionFromOption]);\n  const loadingMarkup = loading ? /*#__PURE__*/React.createElement(Listbox.Loading, {\n    accessibilityLabel: i18n.translate('Polaris.Autocomplete.spinnerAccessibilityLabel')\n  }) : null;\n  const updateSelection = useCallback(newSelection => {\n    if (actionBefore && newSelection === actionBefore.content) {\n      actionBefore.onAction && actionBefore.onAction();\n      return;\n    }\n\n    if (allowMultiple) {\n      if (selected.includes(newSelection)) {\n        onSelect(selected.filter(option => option !== newSelection));\n      } else {\n        onSelect([...selected, newSelection]);\n      }\n    } else {\n      onSelect([newSelection]);\n    }\n  }, [allowMultiple, onSelect, selected, actionBefore]);\n  const actionMarkup = actionBefore && /*#__PURE__*/React.createElement(MappedAction, actionBefore);\n  const emptyStateMarkup = emptyState && options.length < 1 && !loading && /*#__PURE__*/React.createElement(\"div\", {\n    role: \"status\"\n  }, emptyState);\n  const autoSelection = actionBefore ? AutoSelection.First : undefined;\n  return /*#__PURE__*/React.createElement(Combobox, {\n    activator: textField,\n    allowMultiple: allowMultiple,\n    onScrolledToBottom: onLoadMoreResults,\n    preferredPosition: preferredPosition,\n    willLoadMoreOptions: willLoadMoreResults\n  }, actionMarkup || optionsMarkup || loadingMarkup || emptyStateMarkup ? /*#__PURE__*/React.createElement(Listbox, {\n    autoSelection: autoSelection,\n    onSelect: updateSelection\n  }, actionMarkup, optionsMarkup && (!loading || willLoadMoreResults) ? optionsMarkup : null, loadingMarkup, emptyStateMarkup) : null);\n};\nAutocomplete.TextField = Combobox.TextField;\n\nexport { Autocomplete };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}