{"ast":null,"code":"import React, { useRef, useEffect, useCallback } from 'react';\nimport { useIsomorphicLayoutEffect } from '../../../../utilities/use-isomorphic-layout-effect.js';\nimport styles from '../../TextField.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\nfunction Resizer(_ref) {\n  let {\n    contents,\n    currentHeight: currentHeightProp = null,\n    minimumLines,\n    onHeightChange\n  } = _ref;\n  const contentNode = useRef(null);\n  const minimumLinesNode = useRef(null);\n  const animationFrame = useRef();\n  const currentHeight = useRef(currentHeightProp);\n  if (currentHeightProp !== currentHeight.current) {\n    currentHeight.current = currentHeightProp;\n  }\n  useEffect(() => {\n    return () => {\n      if (animationFrame.current) {\n        cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, []);\n  const minimumLinesMarkup = minimumLines ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: minimumLinesNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getContentsForMinimumLines(minimumLines)\n    }\n  }) : null;\n  const handleHeightCheck = useCallback(() => {\n    if (animationFrame.current) {\n      cancelAnimationFrame(animationFrame.current);\n    }\n    animationFrame.current = requestAnimationFrame(() => {\n      if (!contentNode.current || !minimumLinesNode.current) {\n        return;\n      }\n      const newHeight = Math.max(contentNode.current.offsetHeight, minimumLinesNode.current.offsetHeight);\n      if (newHeight !== currentHeight.current) {\n        onHeightChange(newHeight);\n      }\n    });\n  }, [onHeightChange]);\n  useIsomorphicLayoutEffect(() => {\n    handleHeightCheck();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: styles.Resizer\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"resize\",\n    handler: handleHeightCheck\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: contentNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getFinalContents(contents)\n    }\n  }), minimumLinesMarkup);\n}\nconst ENTITIES_TO_REPLACE = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\\n': '<br>',\n  '\\r': ''\n};\nconst REPLACE_REGEX = new RegExp(`[${Object.keys(ENTITIES_TO_REPLACE).join()}]`, 'g');\nfunction replaceEntity(entity) {\n  return ENTITIES_TO_REPLACE[entity];\n}\nfunction getContentsForMinimumLines(minimumLines) {\n  let content = '';\n  for (let line = 0; line < minimumLines; line++) {\n    content += '<br>';\n  }\n  return content;\n}\nfunction getFinalContents(contents) {\n  return contents ? `${contents.replace(REPLACE_REGEX, replaceEntity)}<br>` : '<br>';\n}\nexport { Resizer };","map":{"version":3,"names":["React","useRef","useEffect","useCallback","useIsomorphicLayoutEffect","styles","EventListener","Resizer","_ref","contents","currentHeight","currentHeightProp","minimumLines","onHeightChange","contentNode","minimumLinesNode","animationFrame","current","cancelAnimationFrame","minimumLinesMarkup","createElement","ref","className","DummyInput","dangerouslySetInnerHTML","__html","getContentsForMinimumLines","handleHeightCheck","requestAnimationFrame","newHeight","Math","max","offsetHeight","event","handler","getFinalContents","ENTITIES_TO_REPLACE","REPLACE_REGEX","RegExp","Object","keys","join","replaceEntity","entity","content","line","replace"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/TextField/components/Resizer/Resizer.js"],"sourcesContent":["import React, { useRef, useEffect, useCallback } from 'react';\nimport { useIsomorphicLayoutEffect } from '../../../../utilities/use-isomorphic-layout-effect.js';\nimport styles from '../../TextField.scss.js';\nimport { EventListener } from '../../../EventListener/EventListener.js';\n\nfunction Resizer({\n  contents,\n  currentHeight: currentHeightProp = null,\n  minimumLines,\n  onHeightChange\n}) {\n  const contentNode = useRef(null);\n  const minimumLinesNode = useRef(null);\n  const animationFrame = useRef();\n  const currentHeight = useRef(currentHeightProp);\n\n  if (currentHeightProp !== currentHeight.current) {\n    currentHeight.current = currentHeightProp;\n  }\n\n  useEffect(() => {\n    return () => {\n      if (animationFrame.current) {\n        cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, []);\n  const minimumLinesMarkup = minimumLines ? /*#__PURE__*/React.createElement(\"div\", {\n    ref: minimumLinesNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getContentsForMinimumLines(minimumLines)\n    }\n  }) : null;\n  const handleHeightCheck = useCallback(() => {\n    if (animationFrame.current) {\n      cancelAnimationFrame(animationFrame.current);\n    }\n\n    animationFrame.current = requestAnimationFrame(() => {\n      if (!contentNode.current || !minimumLinesNode.current) {\n        return;\n      }\n\n      const newHeight = Math.max(contentNode.current.offsetHeight, minimumLinesNode.current.offsetHeight);\n\n      if (newHeight !== currentHeight.current) {\n        onHeightChange(newHeight);\n      }\n    });\n  }, [onHeightChange]);\n  useIsomorphicLayoutEffect(() => {\n    handleHeightCheck();\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    \"aria-hidden\": true,\n    className: styles.Resizer\n  }, /*#__PURE__*/React.createElement(EventListener, {\n    event: \"resize\",\n    handler: handleHeightCheck\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    ref: contentNode,\n    className: styles.DummyInput,\n    dangerouslySetInnerHTML: {\n      __html: getFinalContents(contents)\n    }\n  }), minimumLinesMarkup);\n}\nconst ENTITIES_TO_REPLACE = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\\n': '<br>',\n  '\\r': ''\n};\nconst REPLACE_REGEX = new RegExp(`[${Object.keys(ENTITIES_TO_REPLACE).join()}]`, 'g');\n\nfunction replaceEntity(entity) {\n  return ENTITIES_TO_REPLACE[entity];\n}\n\nfunction getContentsForMinimumLines(minimumLines) {\n  let content = '';\n\n  for (let line = 0; line < minimumLines; line++) {\n    content += '<br>';\n  }\n\n  return content;\n}\n\nfunction getFinalContents(contents) {\n  return contents ? `${contents.replace(REPLACE_REGEX, replaceEntity)}<br>` : '<br>';\n}\n\nexport { Resizer };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}