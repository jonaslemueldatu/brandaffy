{"ast":null,"code":"import { useState, useCallback } from 'react';\nlet SelectionType;\n(function (SelectionType) {\n  SelectionType[\"All\"] = \"all\";\n  SelectionType[\"Page\"] = \"page\";\n  SelectionType[\"Multi\"] = \"multi\";\n  SelectionType[\"Single\"] = \"single\";\n})(SelectionType || (SelectionType = {}));\nfunction defaultResourceIDResolver(resource) {\n  if ('id' in resource) {\n    return resource.id;\n  }\n  throw new Error('Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`');\n}\nfunction useIndexResourceState(resources) {\n  let {\n    selectedResources: initSelectedResources = [],\n    allResourcesSelected: initAllResourcesSelected = false,\n    resourceIDResolver = defaultResourceIDResolver,\n    resourceFilter = undefined\n  } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    selectedResources: [],\n    allResourcesSelected: false,\n    resourceIDResolver: defaultResourceIDResolver,\n    resourceFilter: undefined\n  };\n  const [selectedResources, setSelectedResources] = useState(initSelectedResources);\n  const [allResourcesSelected, setAllResourcesSelected] = useState(initAllResourcesSelected);\n  const handleSelectionChange = useCallback((selectionType, isSelecting, selection) => {\n    if (selectionType === SelectionType.All) {\n      setAllResourcesSelected(isSelecting);\n    } else if (allResourcesSelected) {\n      setAllResourcesSelected(false);\n    }\n    switch (selectionType) {\n      case SelectionType.Single:\n        setSelectedResources(newSelectedResources => isSelecting ? [...newSelectedResources, selection] : newSelectedResources.filter(id => id !== selection));\n        break;\n      case SelectionType.All:\n      case SelectionType.Page:\n        if (resourceFilter) {\n          const filteredResources = resources.filter(resourceFilter);\n          setSelectedResources(isSelecting && selectedResources.length < filteredResources.length ? filteredResources.map(resourceIDResolver) : []);\n        } else {\n          setSelectedResources(isSelecting ? resources.map(resourceIDResolver) : []);\n        }\n        break;\n      case SelectionType.Multi:\n        if (!selection) break;\n        setSelectedResources(newSelectedResources => {\n          const ids = [];\n          const filteredResources = resourceFilter ? resources.filter(resourceFilter) : resources;\n          for (let i = selection[0]; i <= selection[1]; i++) {\n            if (filteredResources.includes(resources[i])) {\n              const id = resourceIDResolver(resources[i]);\n              if (isSelecting && !newSelectedResources.includes(id) || !isSelecting && newSelectedResources.includes(id)) {\n                ids.push(id);\n              }\n            }\n          }\n          return isSelecting ? [...newSelectedResources, ...ids] : newSelectedResources.filter(id => !ids.includes(id));\n        });\n        break;\n    }\n  }, [allResourcesSelected, resourceFilter, selectedResources.length, resources, resourceIDResolver]);\n  const clearSelection = useCallback(() => {\n    setSelectedResources([]);\n    setAllResourcesSelected(false);\n  }, []);\n  const removeSelectedResources = useCallback(removeResources => {\n    const selectedResourcesCopy = [...selectedResources];\n    const newSelectedResources = selectedResourcesCopy.filter(resource => !removeResources.includes(resource));\n    setSelectedResources(newSelectedResources);\n    if (newSelectedResources.length === 0) {\n      setAllResourcesSelected(false);\n    }\n  }, [selectedResources]);\n  return {\n    selectedResources,\n    allResourcesSelected,\n    handleSelectionChange,\n    clearSelection,\n    removeSelectedResources\n  };\n}\nexport { SelectionType, useIndexResourceState };","map":{"version":3,"names":["useState","useCallback","SelectionType","defaultResourceIDResolver","resource","id","Error","useIndexResourceState","resources","selectedResources","initSelectedResources","allResourcesSelected","initAllResourcesSelected","resourceIDResolver","resourceFilter","undefined","arguments","length","setSelectedResources","setAllResourcesSelected","handleSelectionChange","selectionType","isSelecting","selection","All","Single","newSelectedResources","filter","Page","filteredResources","map","Multi","ids","i","includes","push","clearSelection","removeSelectedResources","removeResources","selectedResourcesCopy"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/utilities/use-index-resource-state.js"],"sourcesContent":["import { useState, useCallback } from 'react';\n\nlet SelectionType;\n\n(function (SelectionType) {\n  SelectionType[\"All\"] = \"all\";\n  SelectionType[\"Page\"] = \"page\";\n  SelectionType[\"Multi\"] = \"multi\";\n  SelectionType[\"Single\"] = \"single\";\n})(SelectionType || (SelectionType = {}));\n\nfunction defaultResourceIDResolver(resource) {\n  if ('id' in resource) {\n    return resource.id;\n  }\n\n  throw new Error('Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`');\n}\n\nfunction useIndexResourceState(resources, {\n  selectedResources: initSelectedResources = [],\n  allResourcesSelected: initAllResourcesSelected = false,\n  resourceIDResolver = defaultResourceIDResolver,\n  resourceFilter = undefined\n} = {\n  selectedResources: [],\n  allResourcesSelected: false,\n  resourceIDResolver: defaultResourceIDResolver,\n  resourceFilter: undefined\n}) {\n  const [selectedResources, setSelectedResources] = useState(initSelectedResources);\n  const [allResourcesSelected, setAllResourcesSelected] = useState(initAllResourcesSelected);\n  const handleSelectionChange = useCallback((selectionType, isSelecting, selection) => {\n    if (selectionType === SelectionType.All) {\n      setAllResourcesSelected(isSelecting);\n    } else if (allResourcesSelected) {\n      setAllResourcesSelected(false);\n    }\n\n    switch (selectionType) {\n      case SelectionType.Single:\n        setSelectedResources(newSelectedResources => isSelecting ? [...newSelectedResources, selection] : newSelectedResources.filter(id => id !== selection));\n        break;\n\n      case SelectionType.All:\n      case SelectionType.Page:\n        if (resourceFilter) {\n          const filteredResources = resources.filter(resourceFilter);\n          setSelectedResources(isSelecting && selectedResources.length < filteredResources.length ? filteredResources.map(resourceIDResolver) : []);\n        } else {\n          setSelectedResources(isSelecting ? resources.map(resourceIDResolver) : []);\n        }\n\n        break;\n\n      case SelectionType.Multi:\n        if (!selection) break;\n        setSelectedResources(newSelectedResources => {\n          const ids = [];\n          const filteredResources = resourceFilter ? resources.filter(resourceFilter) : resources;\n\n          for (let i = selection[0]; i <= selection[1]; i++) {\n            if (filteredResources.includes(resources[i])) {\n              const id = resourceIDResolver(resources[i]);\n\n              if (isSelecting && !newSelectedResources.includes(id) || !isSelecting && newSelectedResources.includes(id)) {\n                ids.push(id);\n              }\n            }\n          }\n\n          return isSelecting ? [...newSelectedResources, ...ids] : newSelectedResources.filter(id => !ids.includes(id));\n        });\n        break;\n    }\n  }, [allResourcesSelected, resourceFilter, selectedResources.length, resources, resourceIDResolver]);\n  const clearSelection = useCallback(() => {\n    setSelectedResources([]);\n    setAllResourcesSelected(false);\n  }, []);\n  const removeSelectedResources = useCallback(removeResources => {\n    const selectedResourcesCopy = [...selectedResources];\n    const newSelectedResources = selectedResourcesCopy.filter(resource => !removeResources.includes(resource));\n    setSelectedResources(newSelectedResources);\n\n    if (newSelectedResources.length === 0) {\n      setAllResourcesSelected(false);\n    }\n  }, [selectedResources]);\n  return {\n    selectedResources,\n    allResourcesSelected,\n    handleSelectionChange,\n    clearSelection,\n    removeSelectedResources\n  };\n}\n\nexport { SelectionType, useIndexResourceState };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}