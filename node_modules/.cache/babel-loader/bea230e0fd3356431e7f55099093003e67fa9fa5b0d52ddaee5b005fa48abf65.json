{"ast":null,"code":"import React, { forwardRef, useState, useRef, useImperativeHandle, useCallback, useEffect, Children } from 'react';\nimport { findFirstFocusableNodeIncludingDisabled, focusNextFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { setActivatorAttributes } from './set-activator-attributes.js';\nimport { Portal } from '../Portal/Portal.js';\nimport { PopoverOverlay, PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nexport { PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nimport { Pane } from './components/Pane/Pane.js';\nimport { Section } from './components/Section/Section.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\n\n// TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\nconst PopoverComponent = /*#__PURE__*/forwardRef(function Popover(_ref, ref) {\n  let {\n    activatorWrapper = 'div',\n    children,\n    onClose,\n    activator,\n    preventFocusOnClose,\n    active,\n    fixed,\n    ariaHaspopup,\n    preferInputActivator = true,\n    zIndexOverride,\n    ...rest\n  } = _ref;\n  const [activatorNode, setActivatorNode] = useState();\n  const overlayRef = useRef(null);\n  const activatorContainer = useRef(null);\n  const WrapperComponent = activatorWrapper;\n  const id = useUniqueId('popover');\n  function forceUpdatePosition() {\n    var _overlayRef$current;\n    (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.forceUpdatePosition();\n  }\n  useImperativeHandle(ref, () => {\n    return {\n      forceUpdatePosition\n    };\n  });\n  const setAccessibilityAttributes = useCallback(() => {\n    if (activatorContainer.current == null) {\n      return;\n    }\n    const firstFocusable = findFirstFocusableNodeIncludingDisabled(activatorContainer.current);\n    const focusableActivator = firstFocusable || activatorContainer.current;\n    const activatorDisabled = 'disabled' in focusableActivator && Boolean(focusableActivator.disabled);\n    setActivatorAttributes(focusableActivator, {\n      id,\n      active,\n      ariaHaspopup,\n      activatorDisabled\n    });\n  }, [id, active, ariaHaspopup]);\n  const handleClose = source => {\n    onClose(source);\n    if (activatorContainer.current == null || preventFocusOnClose) {\n      return;\n    }\n    if (source === PopoverCloseSource.FocusOut && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n      if (!focusNextFocusableNode(focusableActivator, isInPortal)) {\n        focusableActivator.focus();\n      }\n    } else if (source === PopoverCloseSource.EscapeKeypress && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n      if (focusableActivator) {\n        focusableActivator.focus();\n      } else {\n        focusNextFocusableNode(focusableActivator, isInPortal);\n      }\n    }\n  };\n  useEffect(() => {\n    if (!activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    } else if (activatorNode && activatorContainer.current && !activatorContainer.current.contains(activatorNode)) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  useEffect(() => {\n    if (activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  const portal = activatorNode ? /*#__PURE__*/React.createElement(Portal, {\n    idPrefix: \"popover\"\n  }, /*#__PURE__*/React.createElement(PopoverOverlay, Object.assign({\n    ref: overlayRef,\n    id: id,\n    activator: activatorNode,\n    preferInputActivator: preferInputActivator,\n    onClose: handleClose,\n    active: active,\n    fixed: fixed,\n    zIndexOverride: zIndexOverride\n  }, rest), children)) : null;\n  return /*#__PURE__*/React.createElement(WrapperComponent, {\n    ref: activatorContainer\n  }, Children.only(activator), portal);\n});\nfunction isInPortal(element) {\n  let parentElement = element.parentElement;\n  while (parentElement) {\n    if (parentElement.matches(portal.selector)) return false;\n    parentElement = parentElement.parentElement;\n  }\n  return true;\n}\nconst Popover = Object.assign(PopoverComponent, {\n  Pane,\n  Section\n});\nexport { Popover };","map":{"version":3,"names":["React","forwardRef","useState","useRef","useImperativeHandle","useCallback","useEffect","Children","findFirstFocusableNodeIncludingDisabled","focusNextFocusableNode","portal","setActivatorAttributes","Portal","PopoverOverlay","PopoverCloseSource","Pane","Section","useUniqueId","PopoverComponent","Popover","_ref","ref","activatorWrapper","children","onClose","activator","preventFocusOnClose","active","fixed","ariaHaspopup","preferInputActivator","zIndexOverride","rest","activatorNode","setActivatorNode","overlayRef","activatorContainer","WrapperComponent","id","forceUpdatePosition","_overlayRef$current","current","setAccessibilityAttributes","firstFocusable","focusableActivator","activatorDisabled","Boolean","disabled","handleClose","source","FocusOut","isInPortal","focus","EscapeKeypress","firstElementChild","contains","createElement","idPrefix","Object","assign","only","element","parentElement","matches","selector"],"sources":["/Users/jonaslemueldatu/node_modules/@shopify/polaris/build/esm/components/Popover/Popover.js"],"sourcesContent":["import React, { forwardRef, useState, useRef, useImperativeHandle, useCallback, useEffect, Children } from 'react';\nimport { findFirstFocusableNodeIncludingDisabled, focusNextFocusableNode } from '../../utilities/focus.js';\nimport { portal } from '../shared.js';\nimport { setActivatorAttributes } from './set-activator-attributes.js';\nimport { Portal } from '../Portal/Portal.js';\nimport { PopoverOverlay, PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nexport { PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nimport { Pane } from './components/Pane/Pane.js';\nimport { Section } from './components/Section/Section.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\n\n// TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\nconst PopoverComponent = /*#__PURE__*/forwardRef(function Popover({\n  activatorWrapper = 'div',\n  children,\n  onClose,\n  activator,\n  preventFocusOnClose,\n  active,\n  fixed,\n  ariaHaspopup,\n  preferInputActivator = true,\n  zIndexOverride,\n  ...rest\n}, ref) {\n  const [activatorNode, setActivatorNode] = useState();\n  const overlayRef = useRef(null);\n  const activatorContainer = useRef(null);\n  const WrapperComponent = activatorWrapper;\n  const id = useUniqueId('popover');\n\n  function forceUpdatePosition() {\n    var _overlayRef$current;\n\n    (_overlayRef$current = overlayRef.current) === null || _overlayRef$current === void 0 ? void 0 : _overlayRef$current.forceUpdatePosition();\n  }\n\n  useImperativeHandle(ref, () => {\n    return {\n      forceUpdatePosition\n    };\n  });\n  const setAccessibilityAttributes = useCallback(() => {\n    if (activatorContainer.current == null) {\n      return;\n    }\n\n    const firstFocusable = findFirstFocusableNodeIncludingDisabled(activatorContainer.current);\n    const focusableActivator = firstFocusable || activatorContainer.current;\n    const activatorDisabled = 'disabled' in focusableActivator && Boolean(focusableActivator.disabled);\n    setActivatorAttributes(focusableActivator, {\n      id,\n      active,\n      ariaHaspopup,\n      activatorDisabled\n    });\n  }, [id, active, ariaHaspopup]);\n\n  const handleClose = source => {\n    onClose(source);\n\n    if (activatorContainer.current == null || preventFocusOnClose) {\n      return;\n    }\n\n    if (source === PopoverCloseSource.FocusOut && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n\n      if (!focusNextFocusableNode(focusableActivator, isInPortal)) {\n        focusableActivator.focus();\n      }\n    } else if (source === PopoverCloseSource.EscapeKeypress && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n\n      if (focusableActivator) {\n        focusableActivator.focus();\n      } else {\n        focusNextFocusableNode(focusableActivator, isInPortal);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    } else if (activatorNode && activatorContainer.current && !activatorContainer.current.contains(activatorNode)) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  useEffect(() => {\n    if (activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  const portal = activatorNode ? /*#__PURE__*/React.createElement(Portal, {\n    idPrefix: \"popover\"\n  }, /*#__PURE__*/React.createElement(PopoverOverlay, Object.assign({\n    ref: overlayRef,\n    id: id,\n    activator: activatorNode,\n    preferInputActivator: preferInputActivator,\n    onClose: handleClose,\n    active: active,\n    fixed: fixed,\n    zIndexOverride: zIndexOverride\n  }, rest), children)) : null;\n  return /*#__PURE__*/React.createElement(WrapperComponent, {\n    ref: activatorContainer\n  }, Children.only(activator), portal);\n});\n\nfunction isInPortal(element) {\n  let parentElement = element.parentElement;\n\n  while (parentElement) {\n    if (parentElement.matches(portal.selector)) return false;\n    parentElement = parentElement.parentElement;\n  }\n\n  return true;\n}\n\nconst Popover = Object.assign(PopoverComponent, {\n  Pane,\n  Section\n});\n\nexport { Popover };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}